<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ê³ ë ¤ì˜ ì™•: ì´ìê²¸ì˜ ë‚œ</title>
    <style>
        /* ë“œë˜ê·¸ ì‹œ ë°°ê²½ ìƒ‰ìƒ í”¼ë“œë°± ì˜¤ë²„ë ˆì´ */
        #background-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; /* ë°°ê²½(body) ë°”ë¡œ ìœ„ */
            transition: background-color 0.2s ease;
        }
	/* 1. í…ìŠ¤íŠ¸ ë°œê´‘ íš¨ê³¼ */
        .text-glow {
            color: #fff700 !important; /* ìƒ›ë…¸ë€ìƒ‰ */
            text-shadow: 0 0 5px #f1c40f, 0 0 10px #e67e22, 0 0 20px #e74c3c; /* ë¶ˆíƒ€ëŠ” ë“¯í•œ ê´‘ì±„ */
            transform: scale(1.1); /* ê¸€ì ì‚´ì§ ì»¤ì§ */
            transition: all 0.2s;
        }

        /* 2. ì•¡ì²´ ì°°ë‘ê±°ë¦¼(Slosh) íš¨ê³¼ */
        .sloshing {
            animation: sloshWave 0.6s infinite ease-in-out;
            filter: brightness(1.2);
        }
	@keyframes sloshWave {
            0% { transform: scaleY(1); border-radius: 0; }
            50% { transform: scaleY(1.1); border-radius: 50% 50% 0 0 / 20% 20% 0 0; } /* ìœ—ë©´ì„ ì‚´ì§ ë‘¥ê¸€ê²Œ */
            100% { transform: scaleY(1); border-radius: 0; }
        }
	.bar-shimmer {
            animation: shimmerPulse 0.8s infinite alternate;
        }
        @keyframes shimmerPulse {
            0% { filter: brightness(1); box-shadow: 0 0 2px rgba(241, 196, 15, 0.2); }
            100% { filter: brightness(1.4); box-shadow: 0 0 12px rgba(241, 196, 15, 0.8); }
        }
        
        /* ìŠ¤íƒ¯ ì• ë‹ˆë©”ì´ì…˜ ë° ìœ„ì¹˜ ì¡°ì • */
        .highlight-stat {
            animation: pulseStat 0.8s infinite alternate;
            box-shadow: 0 0 15px rgba(241, 196, 15, 0.8);
            border-color: #f1c40f !important;
            z-index: 10;
        }
        @keyframes pulseStat {
            0% { transform: scale(1); }
            100% { transform: scale(1.15); }
        }
        .top-bar .indicator { top: -12px; }
        .bar-row .indicator { left: -12px; top: 50%; transform: translateY(-50%); }

        /* [ê¸°ë³¸ ì„¤ì • & 1í˜ì´ì¦ˆ ë°°ê²½] */
        body {
            font-family: 'Nanum Myeongjo', serif;
            background: radial-gradient(circle, #34495e 0%, #1a252f 100%); 
            color: #ecf0f1;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 100vh; margin: 0; overflow: hidden;
            user-select: none; -webkit-tap-highlight-color: transparent;
            transition: background 2s ease-in-out; 
        }

        /* [2í˜ì´ì¦ˆ ë°°ê²½] */
        body.phase-fire {
            background: radial-gradient(circle, #801d1d 0%, #1a0505 100%);
            animation: fireGlow 3s infinite alternate;
        }
        @keyframes fireGlow {
            0% { box-shadow: inset 0 0 50px rgba(255, 69, 0, 0.2); }
            100% { box-shadow: inset 0 0 150px rgba(255, 0, 0, 0.6); }
        }

        /* [ë ˆì´ì–´ ìˆœì„œ] */
        .game-container { z-index: 1; }
        .warning-overlay { z-index: 10; }
        .intro-overlay { z-index: 9999; }
        .ending-message-overlay { z-index: 10000; }
        .game-over-overlay { z-index: 10001; }
        .achieve-modal { z-index: 20000; }
        .toast { z-index: 30000; }
        .achieve-btn { z-index: 30000; }

        /* [ì¸íŠ¸ë¡œ í™”ë©´] */
        .intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: black;
            display: flex; align-items: center; justify-content: center;
            text-align: center; padding: 20px; box-sizing: border-box;
            transition: opacity 1s; cursor: pointer;
        }
        .intro-text { 
            font-size: 22px; font-weight: bold; line-height: 1.8; margin-bottom: 50px; 
            opacity: 0; max-width: 80%; pointer-events: none; 
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3); 
        }
        .intro-text.show { animation: fadeIn 1.5s forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* [ê²Œì„ ì»¨í…Œì´ë„ˆ] */
        .game-container { width: 320px; text-align: center; position: relative; opacity: 0; transition: opacity 1s; }
        
        /* [ìƒë‹¨ 3ìŠ¤íƒ¯ë°”] */
        .top-bar {
            display: flex; justify-content: space-between;
            width: 240px; padding: 10px 15px;
            background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            margin: 0 auto 20px auto;
        }
        .stat-wrapper { display: flex; flex-direction: column; align-items: center; gap: 5px; position: relative; }
        .stat-item {
            position: relative; width: 45px; height: 45px;
            background-color: rgba(0, 0, 0, 0.5); border-radius: 50%;
            border: 2px solid #bdc3c7; 
            
            /* ë‚´ìš©ë¬¼ì´ ì ˆëŒ€ ì› ë°–ìœ¼ë¡œ ëª» ë‚˜ì˜¤ê²Œ ê°•ì œ ë§ˆìŠ¤í‚¹ */
            overflow: hidden; 
            -webkit-mask-image: -webkit-radial-gradient(white, black); /* ì‚¬íŒŒë¦¬/í¬ë¡¬ í˜¸í™˜ */
            mask-image: radial-gradient(white, black);
            z-index: 0;
        }
        /* ë‚´ë¶€ ì•¡ì²´: ë„ˆë¹„ë¥¼ ë„“í˜€ì„œ ë¹ˆí‹ˆ ë°©ì§€ */
        .stat-fill { 
            position: absolute; bottom: 0; 
            left: -10%; /* ì¢Œìš°ë¡œ ì¡°ê¸ˆ ë” ë„“ê²Œ ë°°ì¹˜ */
            width: 120%; /* ì›ë³´ë‹¤ ë” ë„“ê²Œ í•´ì„œ ê°€ì¥ìë¦¬ ì§ì„  ì•ˆ ë³´ì´ê²Œ í•¨ */
            height: 50%; 
            background-color: #ecf0f1; opacity: 0.8; 
            transition: height 0.3s ease-out; 
            z-index: 1; 
            transform-origin: bottom; /* ë°”ë‹¥ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶œë ì„ */
        }
        .stat-icon { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 22px; z-index: 2; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .stat-name { font-size: 11px; font-weight: bold; color: #bdc3c7; text-shadow: 0 1px 2px black; }

        /* [í•˜ë‹¨ ê²Œì´ì§€ ë°”] */
        .bottom-stats-container { width: 290px; margin: 25px auto 0; display: flex; flex-direction: column; gap: 12px; }
        .bar-row {
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(0, 0, 0, 0.5); padding: 8px 15px;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            position: relative; 
        }
        .bar-icon { font-size: 18px; margin-right: 5px; width: 20px; text-align: center;}
        .bar-label { font-size: 12px; font-weight: bold; color: #bdc3c7; margin-right: 10px; width: 30px; text-align: left; }
        .bar-track { flex-grow: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; margin-right: 10px; }
        .bar-value-fill { height: 100%; width: 50%; background: #f1c40f; transition: width 0.3s ease-out; }
        .bar-text { font-size: 14px; font-weight: bold; width: 25px; text-align: right; }

        /* [ë¯¸ë¦¬ë³´ê¸° ì ] */
        .indicator {
            width: 8px; height: 8px; background-color: #f1c40f; 
            border-radius: 50%; position: absolute; left: 50%; transform: translateX(-50%); 
            opacity: 0; transition: opacity 0.2s; box-shadow: 0 0 5px #f1c40f, 0 0 10px #f1c40f; 
            z-index: 10; pointer-events: none;
        }
        .indicator.active { opacity: 1; }
        .top-bar .indicator { top: -8px; }
        .bar-row .indicator { left: 8px; top: 50%; transform: translateY(-50%); }

        /* [46í„´ ê¸´ê¸‰ ê²½ë³´ ì´í™íŠ¸] */
        .warning-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 60%, rgba(231, 76, 60, 0.6) 100%);
            pointer-events: none; display: none;
            animation: pulseWarning 1s infinite alternate;
        }
        @keyframes pulseWarning { from { opacity: 0.3; } to { opacity: 1; } }
        
        .warning-overlay.hint {
            background: radial-gradient(circle, transparent 50%, rgba(100, 0, 0, 0.5) 100%); 
            animation: none; 
            opacity: 1;
            display: block;
        }

        /* í™”ë©´ ì „ì²´ ë¯¸ì„¸ ì§„ë™ */
        .shake-effect {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-2px, 0, 0); }
            40%, 60% { transform: translate3d(2px, 0, 0); }
        }

        /* [ì¹´ë“œ] */
        .card-container { position: relative; width: 100%; height: 360px; perspective: 1000px; }
        /*  ì¹´ë“œ ë””ìì¸: ì„¸ì›”ì— ë§ˆëª¨ëœ ë‚¡ì€ ë¹„ì„ ìŠ¤íƒ€ì¼ */
        .card {
            width: 270px; 
            height: 310px; /* [ì¤‘ìš”] ë†’ì´ë¥¼ ì¤„ì—¬ì„œ ê²Œì´ì§€ë°”ì™€ ê²¹ì¹¨ ë°©ì§€ */
            position: absolute; left: 0; right: 0; margin: auto; /* ì¤‘ì•™ ì •ë ¬ */
            
            /* ë°°ê²½: ê³ í’ìŠ¤ëŸ¬ìš´ í•œì§€ ë‘ë£¨ë§ˆë¦¬ */
            background-color: #f0e6cc; 
            background-image: 
                linear-gradient(to bottom, rgba(62, 39, 35, 0.2) 0%, transparent 15%, transparent 85%, rgba(62, 39, 35, 0.2) 100%),
                repeating-linear-gradient(90deg, transparent, transparent 3px, rgba(0,0,0,0.02) 4px, transparent 4px);

            /* í…Œë‘ë¦¬: ë‚˜ë¬´ ë´‰ (ì¡±ì) */
            border: none;
            border-top: 15px solid #3e2723;    /* ë´‰ ë‘ê»˜ë„ ì‚´ì§ ì¡°ì • */
            border-bottom: 15px solid #3e2723; 
            
            border-radius: 4px 4px 6px 6px;
            outline: 1px solid #8d6e63;
            outline-offset: -10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            
            display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px;
            
            cursor: grab; transform-origin: 50% 100%; transition: transform 0.1s;
            touch-action: none; -webkit-user-select: none;
            color: #3e2723;
        }
        .card:active { cursor: grabbing; }

        .choice-overlay {
            position: absolute; 
            top: 40px; /* ìƒë‹¨ ë°°ì¹˜ */
            left: 0; 
            width: 100%; 
            padding: 0 10px; 
            box-sizing: border-box;
            
            text-align: center; 
            font-size: 30px; 
            font-weight: 900; 
            line-height: 1.2;
            
            color: #e74c3c; 
            opacity: 0; 
            pointer-events: none;
            z-index: 20;
            
            /* [ë³€ê²½] í•˜ì–€ í…Œë‘ë¦¬ ì‚­ì œ -> ì€ì€í•œ ê·¸ë¦¼ìë¡œ ëŒ€ì²´ */
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
            
            word-break: keep-all;
        }

        /* ì ê¹€ ìƒíƒœ */
        .choice-overlay.locked {
            color: #7f8c8d !important; /* ë” ì§„í•œ íšŒìƒ‰ */
            text-decoration: line-through;
            text-shadow: none; /* ì ê¹€ ìƒíƒœëŠ” ê·¸ë¦¼ì ì—†ìŒ */
            opacity: 0.8;
        }

        /* ì¹´ë“œ ë‚´ë¶€ í…ìŠ¤íŠ¸ (ì§ˆë¬¸) */
        .card h2 { 
            font-size: 20px; /* ì¹´ë“œ ì‘ì•„ì§„ ë§Œí¼ ê¸€ìë„ ì‚´ì§ ì¡°ì • */
            font-weight: bold; line-height: 1.5; 
            margin-bottom: 10px; word-break: keep-all; pointer-events: none;
            color: #261612; 
            text-shadow: 0 0 1px rgba(62, 39, 35, 0.1);
        }

        /* ë…„ë„ í…ìŠ¤íŠ¸ */
        .card p#year-text {
            font-size: 12px; font-weight: bold;
            color: #8d4638; 
            margin-top: 15px;
            border-top: 1px dashed #a1887f; 
            padding-top: 8px;
            width: 70%;
            font-family: serif; 
        }

        /* ë“œë˜ê·¸ ì•ˆë‚´ ë¬¸êµ¬ */
        .card div[style*="opacity:0.3"] {
            color: #5d4037 !important; /* ì—°í•œ ê°ˆìƒ‰ */
            font-size: 11px;
            margin-top: 5px;
        }

        /* [1ë‹¨ê³„ ì—”ë”© ë©”ì‹œì§€ í™”ë©´] */
        .ending-message-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: black; flex-direction: column;
            align-items: center; justify-content: center; color: white; text-align: center;
            padding: 30px; box-sizing: border-box; cursor: pointer;
        }
        .ending-title { font-size: 40px; color: #e74c3c; margin-bottom: 30px; font-weight: bold; }
        .ending-reason { font-size: 20px; line-height: 1.6; color: #ecf0f1; max-width: 80%; }
        .tap-hint { margin-top: 50px; font-size: 12px; color: #7f8c8d; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

        /* [2ë‹¨ê³„ ì‚¬ë£Œ ì—”ë”© í™”ë©´] */
        .game-over-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.95); flex-direction: column;
            align-items: center; justify-content: center; color: white; text-align: center;
        }

        /* ì‚¬ë£Œ ì¢…ì´ ìŠ¤íƒ€ì¼ */
        .history-paper {
            width: 85%; max-width: 400px;
            background: linear-gradient(to bottom, #f4e4bc, #e8d5a7);
            color: #3e2723;
            padding: 30px; border-radius: 4px;
            border-top: 15px solid #4a3121;
            border-bottom: 15px solid #4a3121;
            border-left: 1px solid #c0a080;
            border-right: 1px solid #c0a080;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            text-align: left; position: relative;
            max-height: 80vh; overflow-y: auto;
            clip-path: inset(0 0 100% 0);
            opacity: 1;
        }
        .history-paper.open-effect {
            animation: scrollUnroll 2.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        @keyframes scrollUnroll {
            0% { clip-path: inset(0 0 100% 0); }
            100% { clip-path: inset(0 0 0 0); }
        }

        .history-title {
            text-align: center; font-family: 'Nanum Myeongjo', serif;
            border-bottom: 2px solid #4a3121; padding-bottom: 10px; margin-bottom: 20px;
            font-size: 24px; font-weight: bold; color: #2d1e17; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .history-label { font-weight: bold; color: #795548; margin-right: 5px; }
        .history-text { color: #4e342e; }
        .history-list li { margin-bottom: 3px; color: #5d4037; font-size: 14px; }

        /* ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ */
        .restart-btn {
            display: block; width: 100%; margin-top: 25px;
            padding: 15px; background: #4a3121; color: #f4e4bc;
            border: 3px solid #2d1e17; border-radius: 8px; font-weight: bold; font-size: 18px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: all 0.2s; font-family: 'Nanum Myeongjo', serif;
        }
        .restart-btn:hover { background: #5d4037; transform: translateY(-2px); }
        .restart-btn:active { transform: translateY(1px); box-shadow: 0 2px 5px rgba(0,0,0,0.3); }

        /* [ì—…ì  UI] */
        .achieve-btn {
            position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.5); border: 1px solid white;
            color: white; padding: 5px 10px; border-radius: 15px; font-size: 20px; cursor: pointer;
        }
        .achieve-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); align-items: center; justify-content: center;
        }
        .achieve-box {
            width: 300px; height: 500px; background: #2c3e50; border: 2px solid #f1c40f;
            border-radius: 10px; padding: 20px; overflow-y: auto; color: white; position: relative;
        }
        .achieve-item {
            display: flex; align-items: center; gap: 10px; padding: 10px; margin-bottom: 10px;
            background: rgba(255,255,255,0.1); border-radius: 5px; opacity: 0.5; filter: grayscale(100%);
        }
        .achieve-item.unlocked { opacity: 1; filter: grayscale(0%); background: rgba(241, 196, 15, 0.2); border: 1px solid #f1c40f; }
        .achieve-icon { font-size: 24px; }
        .achieve-info h3 { margin: 0; font-size: 14px; color: #f1c40f; }
        .achieve-info p { margin: 3px 0 0 0; font-size: 11px; color: #bdc3c7; }
        .close-achieve { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: white; }

        /* [ì—…ì  ì•Œë¦¼ í† ìŠ¤íŠ¸] */
        .toast {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            background: rgba(241, 196, 15, 0.9); color: #2c3e50; padding: 10px 20px;
            border-radius: 20px; font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: top 0.5s; width: 80%; text-align: center;
        }
        .toast.show { top: 20px; }
	/* ì¹¨ë¬µ ì„ íƒ ì‹œ ê²€ê²Œ íƒ€ì„œ 'ë°”ë‹¥ìœ¼ë¡œ' ë–¨ì–´ì§€ëŠ” ì´í™íŠ¸ */
        .card.ash-effect {
            animation: burnAsh 0.8s forwards ease-in;
            pointer-events: none;
        }

        @keyframes burnAsh {
            0% {
                transform: translateY(0) scale(1);
                filter: brightness(1) grayscale(0);
                opacity: 1;
            }
            40% {
                /* íƒ€ë“¤ì–´ê°€ëŠ” ëŠë‚Œ (ì‚´ì§ ì•„ë˜) */
                transform: translateY(50px) scale(0.95);
                filter: brightness(0.3) grayscale(1) contrast(1.5);
                opacity: 0.9;
            }
            100% {
                /* ë°”ë‹¥ìœ¼ë¡œ ì™„ì „íˆ íˆ­ ë–¨ì–´ì§ (ì–‘ìˆ˜ 600px) */
                transform: translateY(600px) rotate(-10deg) scale(0.6);
                filter: blur(5px) brightness(0); /* ì¬ê°€ ë˜ì–´ ì‚¬ë¼ì§ */
                opacity: 0;
            }
        }
	/* [NEW] ì—”ë”© ì´í™íŠ¸ ë ˆì´ì–´ ê¸°ë³¸ ì„¤ì • */
        #ending-effect-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 8000; /* ê²Œì„ í™”ë©´ ìœ„, ì—”ë”© ë©”ì‹œì§€ ì•„ë˜ */
            opacity: 0; transition: opacity 0.5s;
        }

        /* --- ì´í™íŠ¸ 1: ë¹„ê·¹ì /í­ë ¥ì  (ë¶‰ì€ ì„¬ê´‘ + ê²©ë ¬í•œ í”ë“¤ë¦¼) --- */
        .effect-violent-flash {
            animation: violentFlash Anim 2s forwards;
        }
        @keyframes violentFlashAnim {
             0% { opacity: 0; background-color: rgba(255, 0, 0, 0); }
             10% { opacity: 0.8; background-color: rgba(231, 76, 60, 0.6); }
             100% { opacity: 1; background-color: rgba(100, 0, 0, 0.9); }
        }
        /* ê¸°ì¡´ shakeë³´ë‹¤ ë” ê°•í•œ í”ë“¤ë¦¼ */
        .violent-shake {
            animation: shakeHard 0.2s infinite;
        }
        @keyframes shakeHard {
            0% { transform: translate(0px, 0px) rotate(0deg); }
            25% { transform: translate(-5px, -5px) rotate(-1deg); }
            50% { transform: translate(5px, 5px) rotate(1deg); }
            75% { transform: translate(-5px, 5px) rotate(-1deg); }
            100% { transform: translate(5px, -5px) rotate(1deg); }
        }

        /* --- ì´í™íŠ¸ 2: ì•”ìš¸í•œ ì‹¤íŒ¨ (í‘ë°± + ì–´ë‘ì›Œì§) --- */
        .effect-gloomy-fade {
            animation: gloomyFadeAnim 3s forwards;
        }
        @keyframes gloomyFadeAnim {
            0% { opacity: 0; background-color: rgba(0,0,0,0); backdrop-filter: grayscale(0%); }
            100% { opacity: 1; background-color: rgba(0,0,0,0.8); backdrop-filter: grayscale(100%); }
        }

        /* --- ì´í™íŠ¸ 3: ì˜ê´‘ìŠ¤ëŸ¬ìš´ ì„±ê³µ (í™©ê¸ˆë¹› ê´‘ì±„) --- */
        .effect-glorious-shine {
            animation: gloriousShineAnim 3s forwards ease-out;
        }
        @keyframes gloriousShineAnim {
            0% { opacity: 0; background: radial-gradient(circle, rgba(241, 196, 15, 0.2) 0%, transparent 50%); }
            50% { opacity: 1; background: radial-gradient(circle, rgba(255, 215, 0, 0.6) 0%, transparent 70%); scale: 1.2; }
            100% { opacity: 1; background: rgba(255, 215, 0, 0.3); scale: 1; }
        }


    </style>
</head>
<body>

    <button class="achieve-btn" onclick="openAchieve()">ğŸ†</button>
    <div class="toast" id="toast">ì—…ì  ë‹¬ì„±!</div>
    <div id="achieve-modal" class="achieve-modal">
        <div class="achieve-box">
            <div class="close-achieve" onclick="closeAchieve()">âœ–</div>
            <h2 style="text-align:center; margin-top:0; border-bottom:1px solid #7f8c8d; padding-bottom:10px;">ì™•ì˜ ë°œìì·¨</h2>
            <div id="achieve-list"></div>
        </div>
    </div>

    <div id="intro-screen" class="intro-overlay" onclick="nextIntro()">
        <div id="intro-text" class="intro-text"></div>
    </div>
    
    <div id="warning-overlay" class="warning-overlay"></div>
    <div id="ending-effect-overlay"></div>
    <div id="background-overlay"></div>
    <div id="game-container" class="game-container">
        <div class="top-bar">
            <div class="stat-wrapper">
                <div class="indicator" id="ind-0"></div>
                <div class="stat-item" id="icon-0"><div class="stat-icon">ğŸ‘‘</div><div class="stat-fill" id="fill-royal"></div></div> <div class="stat-name" id="label-royal">ì™•ê¶Œ</div>
            </div>
            <div class="stat-wrapper">
                <div class="indicator" id="ind-1"></div>
                <div class="stat-item" id="icon-1"><div class="stat-icon">ğŸ</div><div class="stat-fill" id="fill-kin"></div></div> <div class="stat-name" id="label-kin">ì™¸ì²™</div>
            </div>
            <div class="stat-wrapper">
                <div class="indicator" id="ind-2"></div>
                <div class="stat-item" id="icon-2"><div class="stat-icon">âš”ï¸</div><div class="stat-fill" id="fill-military"></div></div> <div class="stat-name" id="label-military">êµ°ì‚¬</div>
            </div>
        </div>

        <div class="card-container">
            <div class="card" id="game-card">
                <div class="choice-overlay" id="choice-overlay">ì„ íƒ</div>
                <h2 id="question-text">ë¡œë”© ì¤‘...</h2>
                <p id="year-text" style="font-size: 12px; color: #7f8c8d; margin-top: 20px;">(ì¸ì¢… ì¬ìœ„ 1ë…„)</p>
                <div style="position:absolute; bottom:15px; opacity:0.3; font-size:14px; color:#bdc3c7;">â–¼ ì¹´ë“œë¥¼ ë“œë˜ê·¸</div>
            </div>
        </div>

        <div class="bottom-stats-container">
            <div class="bar-row">
                <div class="indicator" id="ind-3"></div>
                <div class="bar-icon" id="icon-3">ğŸª™</div> <div class="bar-label">êµ­ê³ </div>
                <div class="bar-track"><div class="bar-value-fill" id="fill-money"></div></div>
                <div class="bar-text" id="text-money">50</div>
            </div>
            <div class="bar-row">
                <div class="indicator" id="ind-4"></div>
                <div class="bar-icon" id="icon-4">ğŸŒ¾</div> <div class="bar-label">ë¯¼ì‹¬</div>
                <div class="bar-track"><div class="bar-value-fill" id="fill-public"></div></div>
                <div class="bar-text" id="text-public">50</div>
            </div>
        </div>
    </div>

    <div id="ending-msg-screen" class="ending-message-overlay" onclick="showHistoryScroll()">
        <h1 id="end-title-msg" class="ending-title">íŒ¨ë°°</h1>
        <p id="end-reason-msg" class="ending-reason">ì‚¬ìœ </p>
        <div class="tap-hint">â–¼ í™”ë©´ì„ í„°ì¹˜í•˜ì—¬ ê¸°ë¡ ë³´ê¸°</div>
    </div>

    <div id="game-over-screen" class="game-over-overlay">
        <div class="history-paper">
            <h2 class="history-title">ê³ ë ¤ì‚¬(é«˜éº—å²) - ì¸ì¢… ì„¸ê°€</h2>
            <div class="history-content" id="history-content">
            </div>
            <button class="restart-btn" onclick="resetGame()">ì—­ì‚¬ ë‹¤ì‹œ ì“°ê¸°</button>
        </div>
    </div>

    <script>
    // --------------------------------------------------------------------------------
    // [ì‹œìŠ¤í…œ] ì—…ì  ë°ì´í„° ë° í•¨ìˆ˜ (LocalStorage ì‚¬ìš©)
    // --------------------------------------------------------------------------------
    const achievements = [
        { id: "win_balance", icon: "ğŸ‘‘", title: "ê· í˜•ì˜ ì™•", desc: "ì²™ì¤€ê²½ì„ íšŒìœ í•´ ì´ìê²¸ì„ ëª°ì•„ë‚´ê³  ê³ ë ¤ì˜ ê· í˜•ì„ ë˜ì°¾ë‹¤." },
        { id: "die_poison", icon: "ğŸ’€", title: "ë¹„ìš´ì˜ ë¯¸ì‹ê°€", desc: "ìˆ˜ìƒí•œ ë–¡ì„ ë¨¹ê³  ìƒì„ ë§ˆê°í•˜ë‹¤." },
        { id: "die_royal", icon: "ğŸ¥€", title: "ìŠí˜€ì§„ ì™•", desc: "ì™•ê¶Œì´ ë°”ë‹¥ë‚˜ íìœ„ë˜ë‹¤." },
        { id: "die_kin", icon: "ğŸ­", title: "ê¼­ë‘ê°ì‹œ", desc: "ì™¸ì²™ì˜ í˜ì´ ë„ˆë¬´ ê°•í•´ì ¸ ê¼­ë‘ê°ì‹œê°€ ë˜ë‹¤." },
        { id: "die_military", icon: "âš”ï¸", title: "êµ°ë¶€ì˜ í¬ìƒì–‘", desc: "êµ°ë¶€ì˜ í˜ì´ ê°•í•´ì§€ê±°ë‚˜, ë°˜ë€ìœ¼ë¡œ ì‚¬ë§í•˜ë‹¤." },
        { id: "die_money", icon: "ğŸ’¸", title: "íŒŒì‚° ì‹ ì²­", desc: "êµ­ê³  íƒ•ì§„ìœ¼ë¡œ ê³ ë ¤ê°€ ë§í•˜ë‹¤." },
        { id: "die_public", icon: "ğŸ”¥", title: "ì„±ë‚œ ë¯¼ì‹¬", desc: "ë¯¼ë€ì´ ì¼ì–´ë‚˜ ê¶ê¶ì´ ë¶ˆíƒ€ë‹¤." },
        { id: "turn_50", icon: "â³", title: "ì ˆë°˜ì˜ ì„±ê³µ", desc: "2ë…„ ë°˜(30í„´)ì„ ë²„í‹°ë‹¤." },
        { id: "turn_100", icon: "ğŸ“œ", title: "ì¥ìˆ˜ì™•", desc: "ì•½ 4ë…„(60í„´) ì´ìƒ ì¥ê¸° ì§‘ê¶Œí•˜ë‹¤." },
        { id: "max_money", icon: "ğŸª™", title: "ë¶€êµ­", desc: "êµ­ê³ ê°€ ê°€ë“ ì°¨ ë„˜ì³ ë¶€ìœ í•œ ë‚˜ë¼ë¥¼ ì´ë£¨ë‹¤." },
        { id: "max_public", icon: "ğŸ™", title: "ì„±êµ°", desc: "ë¯¼ì‹¬ì´ í•˜ëŠ˜ì„ ì°Œë¥´ë‹ˆ ì‹¤ë¡œ ë§Œë°±ì„±ì˜ ì–´ë²„ì´ë¼ í• ë§Œí•˜ë‹¤." },
        { id: "die_tyrant", icon: "ğŸ©¸", title: "í­êµ°", desc: "ì™•ê¶Œì´ í­ì£¼í•˜ì—¬ ê³µí¬ ì •ì¹˜ë¥¼ í¼ì¹˜ë‹¤ ì«“ê²¨ë‚˜ë‹¤." },
        { id: "die_fall", icon: "ğŸ´", title: "ë‚™ë§ˆ", desc: "ì‚¬ëƒ¥ ì¤‘ ë¶ˆì˜ì˜ ì‚¬ê³ ë¡œ ìƒì„ ë§ˆê°í•˜ë‹¤." },
        { id: "win_true", icon: "â˜€ï¸", title: "ëª…êµ°", desc: "ì••ë„ì ì¸ ì™•ê¶Œê³¼ ë¯¼ì‹¬ìœ¼ë¡œ ì™¸ì²™ê³¼ êµ°ë¶€ë¥¼ ì œì••í•˜ê³  í‰í™”ë¥¼ ë˜ì°¾ë‹¤." },
        { id: "die_silence", icon: "ğŸ˜¶", title: "ì¹¨ë¬µì˜ ì™•", desc: "ê²°ì •ì„ ë‚´ë¦¬ì§€ ì•Šê³  ì¹¨ë¬µë§Œ ì§€í‚¤ë‹¤ ì‹ í•˜ë“¤ì—ê²Œ ë²„ë¦¼ë°›ë‹¤." }
    ];

    function getUnlockedData() {
        return JSON.parse(localStorage.getItem("reigns_achievements")) || [];
    }

    function unlockAchievement(id) {
        let unlocked = getUnlockedData();
        if (!unlocked.includes(id)) {
            unlocked.push(id);
            localStorage.setItem("reigns_achievements", JSON.stringify(unlocked));
            const item = achievements.find(a => a.id === id);
            if(item) showToast(`ğŸ† ì—…ì  ë‹¬ì„±: ${item.title}`);
        }
    }

    function showToast(msg) {
        const t = document.getElementById("toast");
        t.innerText = msg; t.classList.add("show");
        setTimeout(() => t.classList.remove("show"), 3000);
    }

    function openAchieve() {
        const modal = document.getElementById("achieve-modal");
        const list = document.getElementById("achieve-list");
        const unlocked = getUnlockedData();
        list.innerHTML = "";
        achievements.forEach(a => {
            const isUnlocked = unlocked.includes(a.id);
            const div = document.createElement("div");
            div.className = `achieve-item ${isUnlocked ? "unlocked" : ""}`;
            div.innerHTML = `<div class="achieve-icon">${a.icon}</div><div class="achieve-info"><h3>${a.title} ${isUnlocked ? "âœ…" : "ğŸ”’"}</h3><p>${isUnlocked ? a.desc : "???"}</p></div>`;
            list.appendChild(div);
        });
        modal.style.display = "flex";
    }

    function closeAchieve() { document.getElementById("achieve-modal").style.display = "none"; }

    // --------------------------------------------------------------------------------
    // [ê²Œì„ ë¡œì§]
    // --------------------------------------------------------------------------------
    const introLines = [
        "ê³ ë ¤ ì˜ˆì¢… 17ë…„â€¦",
        "ë”¸ì´ ì™•ë¹„ë¡œ ì±…ë´‰ëœ ì™¸ì²™ ì„¸ë ¥ â€˜ì´ìê²¸â€™ì´<br>ì ì  ì„¸ë ¥ì„ ë„“íˆê³  ìˆê³ ,",
        "ë¶ë°©ì—ì„œëŠ” ë¬´ì‹  â€˜ì²™ì¤€ê²½â€™ì´<br>ì—¬ì§„ì •ë²Œì—ì„œ í° í™œì•½ì„ í¼ì³¤ìŠµë‹ˆë‹¤.",
        "ì™•ê¶Œê³¼ ì™¸ì²™, ë¶€êµ­ê°•ë³‘ì´ ë°”ëŒ ì•ì˜ ì´›ë¶ˆì²˜ëŸ¼ ìœ„íƒœë¡­ê²Œ ë†“ì—¬ìˆìœ¼ë‹ˆ,",
        "ê³§ ë‹¹ì‹ ì´ ì™•ìœ„ì— ì˜¤ë¥´ëŠ” ìˆœê°„, ì´ ëª¨ë“  í˜ì˜ <strong>ê· í˜•</strong>ì€ ë‹¹ì‹ ì„ ì‹œí—˜í•  ê²ƒì…ë‹ˆë‹¤."
    ];

    let introIndex = 0;
    
    function showIntroText() {
        const txt = document.getElementById("intro-text");
        if(introIndex < introLines.length) {
            txt.innerHTML = introLines[introIndex]; 
            txt.classList.remove("show");
            void txt.offsetWidth; 
            txt.classList.add("show");
        } else {
            const sc = document.getElementById("intro-screen"); 
            sc.style.opacity=0; 
            sc.style.pointerEvents="none";
            setTimeout(()=>{ 
                sc.style.display="none"; 
                document.getElementById("game-container").style.opacity=1; 
                initSwipe(); 
            }, 1000);
        }
    }

    function nextIntro() {
        introIndex++;
        showIntroText();
    }

    // ê²Œì„ ë³€ìˆ˜
    let stats = { royal: 50, kin: 50, military: 50, money: 50, public: 50 };
    let turn = 1; 
    let currentCard = {}; 
    let nextEventCard = null;
    let isPhase2 = false;
    let phase2StartTurn = 0;
    let cheokRandomTurn = 0; // ì²™ì¤€ê²½ ë¶ˆë§Œ ì´ë²¤íŠ¸ ëœë¤ í„´
    let silenceStreak = 0;

    // [ë°ì´í„° 1] ì—°ê³„ ì´ë²¤íŠ¸
    const event_fire_loot = { text: "â€œë¶ˆì´ ì„œì ê³¼ ë³´ë¬¼ì´ ê°€ë“í•œ ì „ê°ìœ¼ë¡œ ë²ˆì§€ê³  ìˆìŠµë‹ˆë‹¤!â€", leftBtn: "ì™•ì‹¤ ì„œì ì„ ì˜®ê²¨ë¼", rightBtn: "ë³´ë¬¼ì„ ì±™ê²¨ë¼", leftEffect: [10, 0, 0, -10, 0], rightEffect: [-10, 0, 0, 30, -10], requirePhase2: true };
    const event_arson = { text: "â€œì²™ì¤€ê²½ì´ ê²°êµ­ ê¶ì— ë¶ˆì„ ì§ˆë €ìŠµë‹ˆë‹¤! ì—°ê²½ê¶ì´ íƒ€ê³  ìˆìŠµë‹ˆë‹¤!â€", leftBtn: "í™”ë§ˆë¥¼ ì§„ì••í•˜ë¼", rightBtn: "ë„ë§ì¹˜ì", leftEffect: [0, 0, 0, 0, 0], rightEffect: [0, 0, 0, 0, 0], leftNext: event_fire_loot, rightNext: event_fire_loot, requirePhase2: true };
    const event_seungpyeong_gate = { text: "â€œë°˜ë€êµ°ì´ ìŠ¹í‰ë¬¸(æ˜‡å¹³é–€) ì•ê¹Œì§€ ë“¤ì´ë‹¥ì³¤ìŠµë‹ˆë‹¤! ì²™ì¤€ê²½ì´ ë¬¸ì„ ë¶€ìˆ˜ë ¤ í•©ë‹ˆë‹¤!â€", leftBtn: "í™œì„ ì˜ì•„ ë§ì„œë¼!", rightBtn: "ì¼ë‹¨ ëŒ€í™”ë¡œ ì‹œê°„ì„ ëŒì–´ë¼",  leftEffect: [0, 0, 0, 0, 0], rightEffect: [0, 0, 0, 0, 0], leftNext: event_arson, rightNext: event_arson, requirePhase2: true };
    const event_cheok_rage = {text: "â€œì²™ì¤€ê²½ì˜ ë™ìƒê³¼ ì•„ë“¤ì´ ìš°ë¦¬ êµ°ì‚¬ì—ê²Œ ì£½ì—ˆìŠµë‹ˆë‹¤! ì²™ì¤€ê²½ì´ ë¶„ë…¸í•˜ì—¬ ë‹¬ë ¤ì˜µë‹ˆë‹¤!â€", leftBtn: "ì„±ë¬¸ì„ ì ê¶ˆë¼!", rightBtn: "ì˜¤í•´ì˜€ë‹¤ê³  ì „í•´ë¼", leftEffect: [0, 0, 0, 0, 0], rightEffect: [0, 0, 0, 0, 0], leftNext: event_seungpyeong_gate, rightNext: event_seungpyeong_gate,  requirePhase2: true };
    const event_force_phase2 = {
        id: "force_phase2",
        text: "â€œíí•˜! ì´ìê²¸ê³¼ ì²™ì¤€ê²½ì˜ ìœ„ì„¸ê°€ í•˜ëŠ˜ì„ ì°”ëŸ¬ ìœ„ê¸°ê°ì„ ëŠë‚€ ì¸¡ê·¼ë“¤ì´ ë…ë‹¨ì ìœ¼ë¡œ ê±°ë³‘í–ˆìŠµë‹ˆë‹¤!â€",
        leftBtn: "ì–´ì©” ìˆ˜ ì—†ë‹¤...", 
        rightBtn: "ì–´ë¦¬ì„ì€ ë†ˆë“¤...",
        leftEffect: [0, 0, 0, 0, 0], 
        rightEffect: [0, 0, 0, 0, 0],
        leftNext: event_cheok_rage, 
        rightNext: event_cheok_rage
    };
    
    // êµ°ì£¼ ì—”ë”© íŠ¸ë¦¬ê±°
    const event_persuade_cheok = {
        id: "persuade_cheok",
        text: "â€œì „í•˜! ì²™ì¤€ê²½ì´ ì´ìê²¸ì—ê²Œ í° ë°°ì‹ ê°ì„ ëŠë¼ê³  ìˆìŠµë‹ˆë‹¤. ì™•ê¶Œê³¼ êµ°ì‚¬ë ¥ë„ ì¶©ë¶„í•©ë‹ˆë‹¤. ì§€ê¸ˆ ëª…ì„ ë‚´ë¦¬ì‹œë©´ ê·¸ê°€ ì´ìê²¸ì„ ë²¨ ê²ƒì…ë‹ˆë‹¤!â€",
        leftBtn: "ì²™ì¤€ê²½ì„ ì‹œì¼œ ì´ìê²¸ì„ ì³ë¼! (ìŠ¹ë¦¬)", 
        rightBtn: "ì•„ì§ì€ ë¶ˆì•ˆí•˜ë‹¤... (ê¸°íšŒ ë°•íƒˆ)",
        leftEffect: [0, 0, 0, 0, 0], 
        rightEffect: [-15, 5, -10, 0, 0] 
    };

    // ì²™ì¤€ê²½ íšŒìœ  ì‹¤íŒ¨ ì´ë²¤íŠ¸
    const event_persuade_fail = {
        id: "persuade_fail",
        text: "â€œì²™ì¤€ê²½ì€ ì ì‹œ í¥ë¯¸ë¥¼ ë³´ì˜€ìœ¼ë‚˜, ë‹¹ì‹ ì˜ ìœ„ì„¸ë¥¼ ê°€ëŠ í•´ë³´ê³ ëŠ” ì´ë‚´ ì‹¤ë§í•œ ë“¯ ê³ ê°œë¥¼ ì €ìœ¼ë©° ëŒì•„ì„­ë‹ˆë‹¤.â€",
        leftBtn: "ëë‚¬êµ¬ë‚˜...", rightBtn: "ì´ëŸ´ ìˆ˜ê°€...", 
        leftEffect: [0, 0, 0, 0, 0], rightEffect: [0, 0, 0, 0, 0]
    };

    // ì²™ì¤€ê²½ ë¶ˆë§Œ ì´ë²¤íŠ¸ (1í˜ì´ì¦ˆ ëœë¤)
    const event_cheok_rumor = {
        text: "â€œë‹¤ë¥¸ ë¬´ì‹ ë“¤ì´ ì²™ì¤€ê²½ì˜ ë“œë†’ì€ ìœ„ì„¸ì— ë¶ˆë§Œì„ í’ˆê³  ìˆë‹¤ëŠ” ì†Œë¬¸ì´ íŒŒë‹¤í•©ë‹ˆë‹¤.â€",
        leftBtn: "ì²™ì¤€ê²½ì€ ë‚˜ì˜ ê³µì‹ ì´ë‹¤", rightBtn: "ìì¤‘í•˜ë¼ê³  ì´ë¥´ê² ë‹¤",
        leftEffect: [-5, 0, 10, 0, 0], rightEffect: [5, 0, -10, 0, 0]
    };

    // [ë°ì´í„° 2] ê³ ì • ìŠ¤í† ë¦¬ ë±
    const storyDeck = [
        { id: 1, text: "â€œì „í•˜ì˜ ì¦‰ìœ„ì— ì´ìê²¸ ëŒ€ê°ì´ ì†ì„ ì“´ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.â€", leftBtn: "ê°ì‚¬ë¥¼ í‘œí•˜ë¼", rightBtn: "ê·¸ê²Œ ë¬´ìŠ¨ ìƒê´€ì´ì§€?", leftEffect: [-10, 10, 0, 0, 0], rightEffect: [10, -10, 0, 0, 0], downBtn: "ì¹¨ë¬µí•œë‹¤", downEffect: [0, 0, 0, 0, 0] },
        { id: 45, text: "â€œì˜í†µì‚¬ ë¶ìª½ì—ì„œ ê¹Œë§ˆê·€ ë–¼ê°€ ì‹œë„ëŸ½ê²Œ ìš¸ë©° ì„œë¡œ ì‹¸ìš°ê³  ìˆìŠµë‹ˆë‹¤. í‰ì¡°ê°€ ë¶„ëª…í•©ë‹ˆë‹¤.â€", leftBtn: "ì œì‚¬ë¥¼ ì§€ë‚´ ì•¡ìš´ì„ ë§‰ì•„ë¼", rightBtn: "ë¯¸ë¬¼ë“¤ì˜ ë‹¤íˆ¼ì¼ ë¿ì´ë‹¤", leftEffect: [0, 0, 0, -10, 10], rightEffect: [0, 0, 0, 0, -10] }, 
        { id: 46, text: "â€œíí•˜, ë¶ˆë§Œì„ í’ˆì€ ë¬´ì‹ ë“¤ì´ ì´ìê²¸ì„ ì¹˜ìê³  ì œì•ˆí•©ë‹ˆë‹¤. ì´ìê²¸ê³¼ ì²™ì¤€ê²½ì„ ì œê±°í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì¼ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤...â€", leftBtn: "ì§€ê¸ˆì´ ê¸°íšŒë‹¤!", rightBtn: "ê·¸ë“¤ì—ê²Œ ë¹Œë¯¸ë¥¼ ì¤„ ë¿ì´ë‹¤", leftEffect: [0, -10, -10, 0, 0], leftNext: event_cheok_rage, rightEffect: [0, 0, 0, 0, 0] },
        { id: 51, text: "â€œíí•˜! í˜ˆê¸° ì™•ì„±í•œ ì¸¡ê·¼ë“¤ì´ ì°¸ì§€ ëª»í•˜ê³  ë…ë‹¨ì ìœ¼ë¡œ ì´ìê²¸ì˜ ì§‘ì„ ê³µê²©í–ˆìŠµë‹ˆë‹¤!â€", leftBtn: "ë¶ˆê°€í”¼í•œ ì¼ì´ì—ˆë‹¤", rightBtn: "ì–´ë¦¬ì„ì€ ë†ˆë“¤...", leftEffect: [0, 0, 0, 0, 0], leftNext: event_cheok_rage, rightEffect: [0, 0, 0, 0, 0], rightNext: event_cheok_rage, downBtn: "ì¹¨ë¬µí•œë‹¤", downEffect: [0, 0, 0, 0, 0], downNext: event_cheok_rage }
    ];

    // [ë°ì´í„° 3] ëœë¤ ë± 
    const randomDeck = [
        // [1í˜ì´ì¦ˆ]
        { onlyPhase1: true, text: "â€œì „í•˜, ì´ìê²¸ ëŒ€ê°ê»˜ì„œ ì…‹ì§¸ ë”¸ì„ ì „í•˜ì˜ ë¹„ë¡œ ë§ì´í•˜ë¼ê³  í•˜ì‹­ë‹ˆë‹¤.â€", leftBtn: "ì´ëª¨ì™€ ê²°í˜¼ì´ë¼ë‹ˆ!", rightBtn: "ë°›ì•„ë“¤ì—¬ë¼", leftEffect: [10, -20, 0, 0, 0], rightEffect: [-10, 20, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œëŒ€ê°ì˜ ì‚¬ì´Œì˜ íŒ”ì´Œì„ ì¥êµ°ìœ¼ë¡œ ì„ëª…í•˜ë¼ëŠ” ìƒì†Œê°€ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "ì‹œí‚¤ëŠ” ëŒ€ë¡œ í•´", rightBtn: "ëŠ¥ë ¥ì´ ìš°ì„ ì´ë‹¤", leftEffect: [-10, 10, -10, 10, 0], rightEffect: [10, -10, 10, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ ëŒ€ê°ì˜ ìƒì‹ ì…ë‹ˆë‹¤. ì„ ë¬¼ì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "í™”ë ¤í•˜ê²Œ ë³´ë‚´ë¼!", rightBtn: "ë§ˆìŒë§Œ ì „í•´ë¼", leftEffect: [0, 10, 0, -10, 0], rightEffect: [0, -10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì‹œì¤‘ì— 'ì‹­ì(åå…«å­: ì´ì”¨)ê°€ ì™•ì´ ëœë‹¤'ëŠ” ì†Œë¬¸ì´ ëŒê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "í—›ì†Œë¬¸ì´ë‹¤!", rightBtn: "í¥ë¯¸ë¡­êµ°...", leftEffect: [10, -10, 0, 0, 0], rightEffect: [0, 10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì™•ì‹¤ì˜ ì¬ì •ê³¼ ì´ìê²¸ ê°€ë¬¸ì˜ ì¬ì •ì´ ì„ì—¬ êµ­ê³  íŒŒì•…ì´ ì–´ë µìŠµë‹ˆë‹¤.â€", leftBtn: "ë¶„ë¦¬ ê°œí˜ì„ ì¶”ì§„í•˜ë¼", rightBtn: "ì¥ì¸ì´ ì•Œì•„ì„œ í•˜ê² ì§€", leftEffect: [10, -10, 0, 10, 0], rightEffect: [-10, 10, 0, -10, 0] },
        { onlyPhase1: true, text: "â€œì‹ í•˜ë“¤ì´ ì¤‘ì•™êµ°ì˜ ê·œëª¨ë¥¼ ë‘ ë°°ë¡œ ëŠ˜ë¦¬ìê³  ì œì•ˆí•©ë‹ˆë‹¤.â€", leftBtn: "ë¹„ë°€ë¦¬ì— ì§„í–‰í•œë‹¤", rightBtn: "ëˆì´ ë¬¸ì œë‹¤", leftEffect: [10, 0, 20, -20, 0], rightEffect: [-10, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì˜¬í•´ëŠ” í’ë…„ì…ë‹ˆë‹¤. ë°±ì„±ë“¤ì´ ìˆ˜í™•í•œ ê³¡ì‹ ë•ë¶„ì— êµ­ê³ ê°€ ì±„ì›Œì¡ŒìŠµë‹ˆë‹¤.â€", leftBtn: "ì´ë¯¸ êµ­ê³ ê°€ ì±„ì›Œì¡Œìœ¼ë‹ˆ ì„¸ê¸ˆì„ ë‚®ì¶°ë¼", rightBtn: "ì„¸ê¸ˆì„ ë” ì˜¬ë ¤ë„ ëœë‹¤ëŠ” ëœ»ì´êµ°?", leftEffect: [0, 0, 0, 0, 30], rightEffect: [0, 0, 0, 30, -20] },
        { onlyPhase1: true, text: "â€œì†¡ë‚˜ë¼ì˜ ì‚¬ì‹ ì´ ê¸ˆë‚˜ë¼ë¥¼ ê²¬ì œí•˜ìë©° ì„ ë¬¼ì„ ê°€ì§€ê³  ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "êµ­ê³ ì— ì±„ì›Œ ë„£ì–´", rightBtn: "ê¸ˆì„ í™”ë‚˜ê²Œ í•´ì„  ì•ˆëœë‹¤â€¦", leftEffect: [0, 0, 0, 10, 0], rightEffect: [-10, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œë¶ë°©ì˜ ì¥êµ° í•œ ëª…ì´ ì€í‡´ í›„ ê¶ê¶ í˜¸ìœ„ì§ì„ ìì²˜í–ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì¦‰ì‹œ ì„ëª…í•œë‹¤", rightBtn: "ë…¸ê³ ë¥¼ ì¹˜í•˜í•˜ê³  ëŒë ¤ë³´ë‚¸ë‹¤", leftEffect: [10, 0, 10, -10, 0], rightEffect: [0, 0, -10, 0, 0] },
        { onlyPhase1: true, text: "â€œê¶ê¶ ë°– ë°±ì„±ë“¤ ì‚¬ì´ì—ì„œ ì „ì—¼ë³‘ì´ ì°½ê¶í•˜ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê²©ë¦¬ì‹œí‚¤ê³  ë°©ì¹˜í•˜ë¼", rightBtn: "ì•½ì¬ë¥¼ ê³µê¸‰í•˜ë¼", leftEffect: [0, 0, 0, 0, -20], rightEffect: [10, 0, 0, -10, 20] },
        { onlyPhase1: true, text: "â€œë°¤ì‚¬ì´ ê¶ê¶ì— ë²¼ë½ì´ ë–¨ì–´ì ¸ í‰í‰í•œ ì†Œë¬¸ì´ ëŒê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê¶ê¶ì„ ìˆ˜ë¦¬í•˜ë¼", rightBtn: "ìš´ëª…ì´ë‹¤", leftEffect: [10, 0, 0, -10, 10], rightEffect: [-10, 0, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œì˜¤ë˜ëœ ê±´ë¬¼ ì§€ë¶•ì´ ë¬´ë„ˆì¡ŒìŠµë‹ˆë‹¤. ì•ˆì „ì„ ìœ„í•´ì„œëŠ” ìˆ˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.â€", leftBtn: "êµ­ê³ ë¥¼ í„¸ì–´ ìˆ˜ë¦¬í•˜ë¼", rightBtn: "ìì¬ë¥¼ ì§•ë°œí•˜ë¼", leftEffect: [0, 0, 0, -10, 0], rightEffect: [0, 0, 0, 10, -10] },
        { onlyPhase1: true, text: "â€œë‚¨ìª½ í•´ì•ˆê°€ì— í•´ì ì´ ìì£¼ ì¶œëª°í•˜ê³  ìˆë‹¤ëŠ” ë³´ê³ ê°€ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "êµ°ì‚¬ë¥¼ ë³´ë‚´ í† ë²Œí•˜ë¼", rightBtn: "ì§€ë°©ì— ë§¡ê¸´ë‹¤", leftEffect: [0, 0, 10, -20, 20], rightEffect: [0, 0, 0, 0, -20] },
        { onlyPhase1: true, text: "â€œí™˜ê´€ í•œ ëª…ì´ ì´ìê²¸ê³¼ ì²™ì¤€ê²½ì´ ì£¼ê³  ë°›ì€ ë¹„ë°€ ì„œì°°ì„ ì…ìˆ˜í•´ì™”ìŠµë‹ˆë‹¤. ì—´ì–´ë³´ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ì¦‰ì‹œ ì—´ì–´ ë³¸ë‹¤", rightBtn: " ê·¸ëŒ€ë¡œ íƒœì›Œë²„ë ¤ë¼", leftEffect: [0, -10, -10, 0, 0], rightEffect: [0, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ íŒŒë²Œê³¼ ì™¸ì²™ë“¤ì´ ì™•ì—ê²Œ ì ˆí•  ë•Œ í—ˆë¦¬ë§Œ êµ½íˆëŠ” ê²½ìš°ê°€ ëŠ˜ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì˜ˆë²•ì„ ë°”ë¡œì¡ì•„ë¼", rightBtn: "ì‚¬ì†Œí•œ ì¼ì´ë‹¤", leftEffect: [20, -20, 0, 0, 0], rightEffect: [-20, 20, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œë¬¸ì‹ ë“¤ì´ ëª¨ë‘ ì´ìê²¸ì„ ë‘ë ¤ì›Œí•´ ê·¸ ëˆ„êµ¬ë„ ë¹„íŒí•˜ëŠ” ì´ê°€ ì—†ìŠµë‹ˆë‹¤.â€", leftBtn: "ë¬¸ì‹ ë“¤ì„ ë…ë ¤í•œë‹¤", rightBtn: "ë¬´ì‹ ë“¤ì—ê²Œ ì˜ì§€í•œë‹¤", leftEffect: [10, -10, 0, 0, 0], rightEffect: [-10, -10, 10, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ì „ì— ì‚¬ë©´ë°›ì€ ì£„ì¸ì„ ì´ìê²¸ì´ ë‹¤ì‹œ ì²´í¬í•˜ì—¬ ì²˜í˜•í–ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê¾¸ì§–ëŠ”ë‹¤", rightBtn: "ì‚¬ë©´ì„ ì·¨ì†Œí•œë‹¤", leftEffect: [10, -10, 0, 0, 0], rightEffect: [-10, 10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œìŠ¹ë ¤ë“¤ì´ ëŒ€ê·œëª¨ ë¶ˆêµ í–‰ì‚¬ë¥¼ ì—´ê¸° ìœ„í•œ ì§€ì›ì„ ìš”ì²­í•©ë‹ˆë‹¤.â€", leftBtn: "ì§€ì›í•œë‹¤", rightBtn: "ì•Œì•„ì„œ í•´ë¼", leftEffect: [0, 0, 0, -10, 10], rightEffect: [0, 0, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œíƒë¼êµ°(ì œì£¼)ì—ì„œ íŠ¹ì‚°ë¬¼ì„ ê°€ì§€ê³  ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "í›„í•œ ë³´ìƒì„ ë‚´ë¦°ë‹¤", rightBtn: "ë” ê°€ì ¸ì™€!", leftEffect: [0, 0, 0, -10, 10], rightEffect: [0, 0, 0, 10, -10] },
        { onlyPhase1: true, text: "â€œì™•ì‹¤ì˜ ì •í†µì„±ì„ ìœ„í•´ ì—­ì‚¬ì„œë¥¼ ìƒˆë¡œ í¸ì°¬í•˜ìëŠ” ê±´ì˜ê°€ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "í•™ìë“¤ì—ê²Œ ëª…ë ¹í•œë‹¤", rightBtn: "ì‹œê¸‰í•œ ì¼ì´ ì•„ë‹ˆë‹¤", leftEffect: [10, 0, 0, -10, 0], rightEffect: [-10, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œê´€ë¦¬ ë¶€ì‹¤ë¡œ ì§€ë°© ì„¸ê¸ˆ ì§•ìˆ˜ê°€ ì›í™œí•˜ê²Œ ì´ë£¨ì–´ì§€ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "êµ°ì‚¬ë¥¼ íŒŒê²¬í•˜ë¼", rightBtn: "ì‚¬ì •ì„ ë´ì£¼ì", leftEffect: [0, 0, 0, 20, -20], rightEffect: [0, 0, 0, -10, 20] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ì˜ ì¢…ë“¤ì´ ë°±ì„±ë“¤ì˜ ë•…ì„ ëºì–´ ìˆ˜ë ˆì— ì‹£ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì–´ì©” ìˆ˜ ì—†ë‹¤...", rightBtn: "ìˆ˜ë ˆë¥¼ ì—ì–´ë¼!", leftEffect: [-20, 10, 0, 0, -20], rightEffect: [20, -10, 0, 0, 20] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ì´ ì§‘ì— 'ìˆ­ë•ë¶€'ë¼ëŠ” ê´€ì²­ì„ ì„¸ìš°ê³  ë…ìì ìœ¼ë¡œ ì •ì¹˜ë¥¼ í•˜ë ¤ í•©ë‹ˆë‹¤.â€", leftBtn: "ìˆ˜ê³ ë¥¼ ëœì–´ì£¼ë‹ˆ...", rightBtn: "ì™•ì´ ë‘˜ì´ëƒ?", leftEffect: [-20, 20, 0, 10, 0], rightEffect: [10, -10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ì´ ëª°ë˜ ì‚¬ë³‘ì„ ê¸°ë¥´ê³  ë¬´ê¸°ë¥¼ ì‚¬ë“¤ì´ê³  ìˆë‹¤ëŠ” ì²©ë³´ì…ë‹ˆë‹¤.â€", leftBtn: "ë¶„ëª… ë‚˜ë¼ë¥¼ ìœ„í•œ í–‰ë™ì¼ ê²ƒì´ë‹¤", rightBtn: "ì¸¡ê·¼ì—ê²Œ ì‚¬ë³‘ì„ í‚¤ìš°ë¼ê³  ëª…í•œë‹¤", leftEffect: [-10, 20, 0, 10, 0], rightEffect: [10, 0, 10, -20, 0] },
        { onlyPhase1: true, 
          isHunting: true, 
          text: "â€œë§¤í˜•(ì´ìê²¸ì˜ ì•„ë“¤)ì´ ì‚¬ëƒ¥ì„ ê°€ìê³  í•©ë‹ˆë‹¤. í™”ì‚´ì´ ì–´ë””ë¡œ ë‚ ì•„ì˜¬ì§€ ëª¨ë¦…ë‹ˆë‹¤.â€", leftBtn: "ê²ë¨¹ì„ ìˆœ ì—†ë‹¤", rightBtn: "ì•„í”„ë‹¤ê³  í•œë‹¤", leftEffect: [10, 0, 0, 0, 0], rightEffect: [-10, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì²™ì¤€ê²½ì´ ìˆ ì— ì·¨í•´ ì™•ì‹¤ ê·¼ìœ„ë³‘ì„ í­í–‰í–ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì¥êµ°ì´ ì·¨í–ˆêµ¬ë ¤", rightBtn: "ê³¤ì¥ì„ ì³ë¼", leftEffect: [-10, 0, 0, 0, -10], rightEffect: [10, 0, -20, 0, 10] },
        { onlyPhase1: true, text: "â€œì„œì—­ ìƒì¸ì´ ì§ˆ ì¢‹ì€ ì² ê²€ì„ ê°€ì§€ê³  ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "ëª¨ë‘ ì‚¬ë“¤ì—¬ë¼", rightBtn: "ëˆì´ ì—†ë‹¤", leftEffect: [0, 0, 10, -20, 0], rightEffect: [0, 0, -10, 0, 0] },
        { onlyPhase1: true, text: "â€œì‹ ë´‰ë¬¸(ç¥é³³é–€)ì— í–‰ì°¨í•˜ì—¬ ì£„ì¸ë“¤ì„ ì‚¬ë©´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ë•ì„ ë² í’€ë¼", rightBtn: "ë²•ì€ ì—„ê²©í•´ì•¼ í•œë‹¤", leftEffect: [10, 0, 0, 0, 10], rightEffect: [10, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œê¹€ë¶€ì‹ ë“±ì´ ì„ ì™•ì˜ ê¸°ë¡ì¸ 'ì˜ˆì¢…ì‹¤ë¡' í¸ì°¬ì„ ì‹œì‘í•˜ê² ë‹¤ê³  í•©ë‹ˆë‹¤.â€", leftBtn: "ì§€ì›ì„ ì•„ë¼ì§€ ë§ˆë¼", rightBtn: "êµ­ê³ ë¥¼ ì•„ê»´ë¼", leftEffect: [20, 0, 0, -20, 0], rightEffect: [-20, 0, 0, 10, 0] },
        { onlyPhase1: true, text: "â€œíŒ”ê´€íšŒë¥¼ ì—´ì–´ ë¶€ì²˜ë‹˜ì˜ í˜ìœ¼ë¡œ ë‚˜ë¼ì˜ ì•ˆë…•ì„ ë¹Œ ì‹œê¸°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì„±ëŒ€í•˜ê²Œ ì—´ì–´ë¼", rightBtn: "ê°„ì†Œí•˜ê²Œ í•˜ë¼", leftEffect: [20, 0, 0, -30, 30], rightEffect: [-10, 0, 0, 10, -20] },
        { onlyPhase1: true, text: "â€œë™ì—¬ì§„ ì¶”ì¥ì´ í™”ì¹œì˜ ì˜ë¯¸ë¡œ ì¢‹ì€ ë§ì„ ë°”ì³¤ìŠµë‹ˆë‹¤.â€", leftBtn: "í•˜ì‚¬í’ˆì„ ë‚´ë ¤ë¼", rightBtn: "ê²½ê³„í•´ì•¼ í•œë‹¤. êµ°ì‚¬ë¥¼ ëŠ˜ë¦°ë‹¤.", leftEffect: [10, 0, 0, 10, 0], rightEffect: [0, 0, 10, -10, 0] },
        { onlyPhase1: true, text: "â€œì†¡ë‚˜ë¼ ì‚¬ì‹ ì´ ì „í•˜ê»˜ ì •ì‹ìœ¼ë¡œ ì±…ë´‰ì„ ìš”ì²­í•˜ë¼ê³  ê·€ë”í–ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì‚¬ì‹ ì„ ë³´ë‚´ë¼", rightBtn: "ìš°ë¦¬ëŠ” ë…ìì ì¸ êµ­ê°€ë‹¤", leftEffect: [10, 0, 0, -10, 0], rightEffect: [10, 0, -10, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ ëŒ€ê°ì´ ê³µì„ ì¸ì •ë°›ì•„ 'ì¡°ì„ êµ­ê³µ(æœé®®åœ‹å…¬)'ì˜ ì§€ìœ„ì— ì˜¤ë¥´ê¸¸ ì›í•©ë‹ˆë‹¤.â€", leftBtn: "í—ˆë½í•œë‹¤...", rightBtn: "ê·¸ê±´ ì™•ì˜ ì§€ìœ„ë‹¤!", leftEffect: [-20, 20, 0, 0, 0], rightEffect: [10, -10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ ëŒ€ê°ì´ ìì‹ ì˜ ì§‘ìœ¼ë¡œ ì „í•˜ë¥¼ ì´ˆëŒ€í•´ ë°¤ëŠ¦ê²Œê¹Œì§€ ì”ì¹˜ë¥¼ ì—´ìê³  í•©ë‹ˆë‹¤.â€", leftBtn: "ì¥ì¸ì˜ ì²­ì´ë‹ˆ ê°€ì", rightBtn: "ì²´í†µì„ ì§€ì¼œì•¼ í•œë‹¤", leftEffect: [0, 20, 0, 0, 0], rightEffect: [10, -10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œê¸ˆë‚˜ë¼ê°€ ìš°ë¦¬ êµ­ì„œê°€ í‘œë¬¸(ì‹ í•˜ì˜ ê¸€) í˜•ì‹ì´ ì•„ë‹ˆë¼ë©° ë°›ì§€ ì•Šê³  ëŒë ¤ë³´ëƒˆìŠµë‹ˆë‹¤!â€", leftBtn: "êµ´ìš•ì ì´ì§€ë§Œ ì–´ì©” ìˆ˜ ì—†ë‹¤", rightBtn: "ì˜¤ë‘ìº ì£¼ì œì—!", leftEffect: [-10, 0, 0, 0, 0], rightEffect: [10, 0, -10, 0, 0] },
        { onlyPhase1: true, text: "â€œì¡ë¥˜(ì²œí•œ ì¶œì‹ )ì˜ ìì†ë“¤ì´ ê´€ì§ì— ì˜¤ë¥´ëŠ” ê²ƒì„ ì œí•œí•´ì•¼ í•œë‹¤ëŠ” ìƒì†Œì…ë‹ˆë‹¤.â€", leftBtn: "ê¸°ê°•ì„ ë°”ë¡œì¡ì•„ë¼", rightBtn: "ëŠ¥ë ¥ì´ ì¤‘ìš”í•˜ë‹¤", leftEffect: [0, 10, 0, 0, -10], rightEffect: [0, -10, 0, 0, 10] },
        { onlyPhase1: true, text: "â€œìš”ë‚˜ë¼(ê±°ë€)ë¡œ ë³´ë‚¸ ì‚¬ì‹ ì´ ê¸¸ì´ ë§‰í˜€ ë„ì°©í•˜ì§€ ëª»í•˜ê³  ëŒì•„ì™”ìŠµë‹ˆë‹¤. êµ­ì œ ì •ì„¸ê°€ ì‹¬ìƒì¹˜ ì•ŠìŠµë‹ˆë‹¤.â€", leftBtn: "ê¸ˆë‚˜ë¼ì™€ ì¹œí•´ì§€ì", rightBtn: "ì†¡ë‚˜ë¼ì™€ ë”ìš± êµë¥˜í•˜ì", leftEffect: [0, 0, 10, -10, 0], rightEffect: [0, 0, -10, 20, 0] },
        { onlyPhase1: true, text: "â€œê°€ë­„ì´ ê³„ì†ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë¬´ë‹¹ì„ ëª¨ì•„ ë¹„ë¥¼ ë¹Œì–´ì•¼ í•œë‹¤ëŠ” ê±´ì˜ê°€ ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê¸°ìš°ì œë¥¼ ì§€ë‚´ë¼", rightBtn: "ë¯¸ì‹ ì¼ ë¿ì´ë‹¤", leftEffect: [10, 0, 0, -20, 20], rightEffect: [0, 0, 0, 0, -20] },
        { onlyPhase1: true, text: "â€œì–µìš¸í•¨ì„ í˜¸ì†Œí•˜ëŠ” ì£„ìˆ˜ë“¤ì´ ë§ìŠµë‹ˆë‹¤. ì¬ì‹¬ì„ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ë‹¤ì‹œ ì‚´í´ë¼", rightBtn: "íŒê²°ì€ ìœ ì§€ëœë‹¤", leftEffect: [10, 0, 0, 0, 10], rightEffect: [0, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì§€ë°©ì˜ ì£¼(å·)ì™€ ì§„(é­)ì„ ì§€í‚¤ëŠ” ì¥êµë“¤ì˜ ë…¹ë´‰(ì›”ê¸‰) ê¸°ì¤€ì„ ì •í•´ì•¼ í•©ë‹ˆë‹¤.â€", leftBtn: "í›„í•˜ê²Œ ì¤˜ë¼", rightBtn: "ë…¹ë´‰ì„ ì¤„ì—¬ë¼", leftEffect: [0, 0, 10, -10, 0], rightEffect: [0, 0, -10, 20, 0] },
        { onlyPhase1: true, text: "â€œíƒê´€ì˜¤ë¦¬ë“¤ì´ êµ­ë²•ì„ êµë¬˜í•˜ê²Œ ì•…ìš©í•´ ë°±ì„±ë“¤ì„ ìˆ˜íƒˆí•˜ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì—„ë²Œì— ì²˜í•˜ë¼!", rightBtn: "ê´€ë£Œë“¤ì„ ë¯¿ì–´ë³´ì", leftEffect: [10, -10, 0, 0, 20], rightEffect: [-10, 10, 0, 0, -20] },
        { onlyPhase1: true, text: "â€œê³¼ê±° ì‹œí—˜ í•©ê²©ì ëª…ë‹¨ì´ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤. ëˆ„êµ¬ë¥¼ ë“±ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ëŠ¥ë ¥ ìœ„ì£¼ë¡œ ë½‘ì•„ë¼", rightBtn: "ì¶”ì²œë°›ì€ ìë¥¼ ë½‘ì•„ë¼", leftEffect: [0, -10, 0, 0, 0], rightEffect: [0, 10, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œëŒ€ë‚®ì— í•´ê°€ ë¹›ì„ ìƒì—ˆìŠµë‹ˆë‹¤(ì¼ì‹)! ì™•ì˜ ë¶€ë•í•¨ì„ ê²½ê³ í•˜ëŠ” í•˜ëŠ˜ì˜ ëœ»ì…ë‹ˆë‹¤.â€", leftBtn: "ììˆ™í•˜ê³  ë°˜ì„±í•œë‹¤", rightBtn: "ìì—° í˜„ìƒì¼ ë¿ì´ë‹¤", leftEffect: [-10, 0, 0, 0, 0], rightEffect: [0, 0, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œì •ê¸° ì¸ì‚¬ë¥¼ ë‹¨í–‰í•  ì‹œê¸°ì…ë‹ˆë‹¤. ì£¼ìš” ê´€ì§ì„ ì–´ë–»ê²Œ ì±„ìš°ì‹œê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ë‚´ ì‚¬ëŒì„ ì‹¬ëŠ”ë‹¤", rightBtn: "ì™¸ì²™ì—ê²Œ ìë¬¸ì„ êµ¬í•œë‹¤", leftEffect: [20, -20, 0, 0, 0], rightEffect: [-20, 20, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œë©¸ë§í•´ê°€ëŠ” ê±°ë€(ìš”ë‚˜ë¼)ì—ì„œ ì‚¬ì‹ ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.â€", leftBtn: "ì‚¬ì‹ ì„ ë§ì´í•˜ë¼", rightBtn: "ê¸ˆë‚˜ë¼ ëˆˆì¹˜ê°€ ë³´ì¸ë‹¤", leftEffect: [0, 0, -10, 0, 0], rightEffect: [0, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œí•˜ëŠ˜ì— ë¶‰ì€ ê¸°ìš´ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤! í‰í‰í•œ ì§•ì¡°ê°€ ì•„ë‹ˆê² ìŠµë‹ˆê¹Œ?â€", leftBtn: "ê²½ê³„ë¥¼ ê°•í™”í•˜ë¼", rightBtn: "ë¬´ì‹œí•´ë¼", leftEffect: [0, 0, 10, -10, -10], rightEffect: [0, 0, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œì´ìê²¸ì´ ìì‹ ì„ 'ì‹ í•˜'ê°€ ì•„ë‹ˆë¼ 'ì¡°ë¶€(í• ì•„ë²„ì§€)'ë¼ ì¹­í•˜ë¼ ê¶Œí•©ë‹ˆë‹¤.â€", leftBtn: "ê·¸ëŸ¬ì‹œì˜¤", rightBtn: "êµ°ì‹ ì˜ ì˜ˆë¥¼ ì§€ì¼œë¼!", leftEffect: [-20, 20, 0, 0, 0], rightEffect: [20, -20, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì²™ì¤€ê²½ì´ ì´ìê²¸ì—ê²Œ ì„œìš´í•¨ì„ ëŠë¼ê³  ìˆìŠµë‹ˆë‹¤. ëˆ„êµ¬ì—ê²Œ ì„ ë¬¼ì„ ë³´ë‚¼ê¹Œìš”?â€", leftBtn: "ì¥ì¸ì—ê²Œ ë°‰ë³´ì¼ ì´ìœ ëŠ” ì—†ë‹¤", rightBtn: "ìš©ë§¹í•œ ì¥êµ°ì„ ìœ„ë¡œí•œë‹¤", leftEffect: [0, 10, -10, -10, 0], rightEffect: [0, -10, 10, -10, 0] },
        { onlyPhase1: true, text: "â€œê°€ë­„ì´ ì‹¬ê°í•´ì ¸ì„œ ê°•ì˜ ë°”ë‹¥ì´ ë³´ì¼ ì •ë„ì…ë‹ˆë‹¤.â€", leftBtn: "ê¸°ìš°ì œë¥¼ ì˜¬ë¦¬ì", rightBtn: "ê°œì…í•˜ì§€ ì•ŠëŠ”ë‹¤", leftEffect: [10, 0, 0, -20, 20], rightEffect: [0, 0, 0, 0, -10] },
        { onlyPhase1: true, text: "â€œê¶ê¶ ì •ì›ì—ì„œ ìŒë‘¥ì´ ë´‰í™©ìƒˆê°€ ë‚˜íƒ€ë‚¬ë‹¤ëŠ” ì†Œë¬¸ì´ ëŒê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê¸¸ì¡°ë¥¼ ë„ë¦¬ í¼íŠ¸ë ¤ë¼", rightBtn: "ì´ëŠ” ì™•ì‹¤ë§Œì˜ ë³µì´ë‹¤", leftEffect: [10, 0, 0, 0, 10], rightEffect: [20, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œêµ°ëŒ€ì˜ ë¹„ì¶• êµ°ëŸ‰ë¯¸ê°€ ì©ì–´ì„œ ëª» ì“°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.â€", leftBtn: "ìƒˆ êµ°ëŸ‰ë¯¸ë¥¼ ë§ˆë ¨í•˜ë¼", rightBtn: "ê·¸ëŒ€ë¡œ ì§€ê¸‰í•˜ë¼", leftEffect: [0, 0, 10, -30, 10], rightEffect: [-10, 0, -20, 10, -10] },
        { onlyPhase1: true, text: "â€œê¸ˆë‚˜ë¼ ì‚¬ì‹ ì´ ê³ ë ¤ì— ë¨¸ë¬´ëŠ” ë™ì•ˆ íš¡í¬ë¥¼ ë¶€ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ê°ë‚´í•´ë¼", rightBtn: "ì„œì‹ ìœ¼ë¡œ ë¶ˆì¾Œê°ì„ í‘œí˜„í•´ë¼", leftEffect: [-10, 0, 0, -10, -10], rightEffect: [10, 0, -20, 0, 10] },
        { onlyPhase1: true, text: "â€œì²™ì¤€ê²½ì´ ê¶ê¶ì—ì„œ ë‚˜ë¬´ë¥¼ ë“¤ì–´ì˜¬ë ¤ íœ˜ë‘ë¥´ëŠ” ê¸°ì˜ˆë¥¼ ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.â€", leftBtn: "ê·¸ëŒ€ëŠ” ê³ ë ¤ì˜ ë³´ë°°ë‹¤!", rightBtn: "ì¬ë¯¸ìˆëŠ” ë¬˜ê¸°ë¡œêµ°!", leftEffect: [0, 0, 10, 0, 0], rightEffect: [0, 0, 0, 0, 0] },
        { onlyPhase1: true, text: "â€œì²™ì¤€ê²½ì˜ ë¨¼ ì¹œì²™ì´ ì¬íŒì— íœ˜ë§ë ¤, ì€ë°€íˆ í¸ì˜ë¥¼ ë´ë‹¬ë¼ ì²­íƒí•©ë‹ˆë‹¤.â€", leftBtn: "ì²´ë©´ì„ ì„¸ì›Œì¤€ë‹¤", rightBtn: "ì¬íŒì€ ê³µì •í•´ì•¼í•œë‹¤", leftEffect: [0, 0, 10, 10, -10], rightEffect: [10, 0, -10, 0, 10] },
	{ onlyPhase1: true, text: "â€œí‰ì•ˆë„ ì§€ì—­ì—ì„œ ê¸ˆê´‘ì„ ë°œê²¬í–ˆë‹¤ê³  í•©ë‹ˆë‹¤.â€", leftBtn: "ëª½ë•… ì±„êµ´í•´ì„œ êµ­ê³ ì— ë„£ì–´ë¼", rightBtn: "í‰ì•ˆë„ì˜ ì„¸ê¸ˆì„ ê°ë©´í•˜ë¼", leftEffect: [0, 0, 0, 40, -10], rightEffect: [10, 0, 0, 10, 30] },

        // [2í˜ì´ì¦ˆ]
        { requirePhase2: true, text: "ê±°ì‚¬ë¥¼ ì£¼ë„í•œ ìµœíƒ, ì•ˆë³´ë¦° ë“±ì´ ì²´í¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ìê²¸ì´ ì²˜ë²Œì„ ìš”êµ¬í•©ë‹ˆë‹¤.", leftBtn: "ëª¨ë‘ ë‚´ê°€ ì‹œí‚¨ ì¼ì´ë‹¤", rightBtn: "ë‚˜ëŠ” ëª¨ë¥´ëŠ” ì¼ì´ë‹¤", leftEffect: [20, -20, 0, 0, 0], rightEffect: [-20, 20, 0, 0, 0] },
        { requirePhase2: true, text: "ì´ìê²¸ì´ ì˜¥ìƒˆë¥¼ ë‚´ë†“ìœ¼ë¼ê³  í˜‘ë°•í•©ë‹ˆë‹¤. ë¶“ê³¼ ì¢…ì´ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.", leftBtn: "ë„¤ ì´ë†ˆ!", rightBtn: "ì•Œê² ë‹¤...", leftEffect: [15, -15, 0, 0, 0], rightEffect: [-15, 15, 0, 0, 0] },
        { requirePhase2: true, text: "ì´ìê²¸ì´ ì „í•˜ì˜ ê±°ì²˜ë¥¼ ìì‹ ì˜ ì§‘ìœ¼ë¡œ ì˜®ê¸°ê³ ì í•©ë‹ˆë‹¤.", leftBtn: "ë‚´ ê¶ê¶ì€ ì´ê³³ì´ë‹¤!", rightBtn: "ì˜ ë¶€íƒí•©ë‹ˆë‹¤, ì¥ì¸ì–´ë¥¸", leftEffect: [10, -15, 0, 0, 0], rightEffect: [-15, 20, 0, 0, 0] },
        { requirePhase2: true, text: "ì´ìê²¸ ëŒ€ê°ì´ ì „í•˜ê»˜ ë–¡ì„ ë³´ëƒˆìŠµë‹ˆë‹¤. ë¬´ì–¸ê°€ ìˆ˜ìƒí•©ë‹ˆë‹¤.", leftBtn: "ì¥ì¸ì˜ ì •ì„±ì¸ë°...", rightBtn: "ìƒˆì—ê²Œ ë˜ì ¸ë¼", leftEffect: [0, 0, 0, 0, 0], isPoison: true, rightEffect: [0, -10, 0, 0, 0] },
        { requirePhase2: true, text: "â€œëˆ„ëŸ° ì•ˆê°œê°€ ì‚¬ë°©ì„ ë®ì–´ í•œ ì¹˜ ì•ë„ ë¶„ê°„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.â€", leftBtn: "ì£¼ìœ„ì— ê°„ì‹ ì´ ê°€ë“í•˜ë‹¤ëŠ” ëœ»ì´ë‹¤!", rightBtn: "ë‚´ê°€ ë¶€ë•í•œ íƒ“ì´ê² ì§€â€¦", leftEffect: [5, -5, 0, 0, 0], rightEffect: [-5, 0, 0, 0, -5] },
        { requirePhase2: true, text: "â€œëŒ€ë‚®ì¸ë°ë„ í–‡ë¹›ì´ í•ë¹›ìœ¼ë¡œ ë¶‰ê²Œ ë³€í–ˆìŠµë‹ˆë‹¤. ë°±ì„±ë“¤ì´ ê³µí¬ì— ë–¨ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "í•˜ëŠ˜ì„ ë‹¬ë˜ì", rightBtn: "ì•”ìš¸í•œ ìƒí™©ì´êµ¬ë‚˜", leftEffect: [0, 0, 0, -10, 10], rightEffect: [-10, 0, 0, 0, -10] },
        { requirePhase2: true, text: "â€œë²•ì™•ì‚¬ì˜ ë¶ˆìƒ ë¨¸ë¦¬ê°€ ì €ì ˆë¡œ ë–¨ì–´ì¡Œë‹¤ê³  í•©ë‹ˆë‹¤!â€", leftBtn: "ì´ìê²¸ì˜ ì•…í–‰ íƒ“ì´ë‹¤!", rightBtn: "ì¦‰ì‹œ ë³µêµ¬í•˜ë¼", leftEffect: [15, -15, 0, 0, 0], rightEffect: [0, 0, 0, -15, 0] },
        { requirePhase2: true, text: "â€œì •êµ­ì´ í˜¼ë€ìŠ¤ëŸ¬ìš°ë‹ˆ ì˜¬í•´ ê³¼ê±° ì‹œí—˜(ê³¼ê±°)ì„ ì¤‘ì§€í•˜ë¼ëŠ” ì••ë°•ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤.â€", leftBtn: "ì´ìê²¸ì˜ ëœ»ëŒ€ë¡œ í•˜ë¼", rightBtn: "ì¸ì¬ ë“±ìš©ì€ ë©ˆì¶œ ìˆ˜ ì—†ë‹¤", leftEffect: [-15, 15, 0, 0, -10], rightEffect: [15, -15, 0, -10, 10] },
        { requirePhase2: true, text: "â€œì´ìê²¸ê³¼ ì²™ì¤€ê²½ì´ ì…ì„ ëª¨ì•„ 'ê¸ˆë‚˜ë¼ë¥¼ ì„ê¸ˆì˜ ë‚˜ë¼ë¡œ ì„¬ê²¨ì•¼ í•œë‹¤(ì‚¬ëŒ€)'ê³  ì£¼ì¥í•©ë‹ˆë‹¤.â€", leftBtn: "í˜„ì‹¤ì„ ë°›ì•„ë“¤ì´ì...", rightBtn: "ì˜¤ë‘ìºì—ê²Œ ë¬´ë¦ ê¿‡ì„ ìˆœ ì—†ë‹¤!", leftEffect: [-15, 10, 10, 0, 0], rightEffect: [15, -10, -10, 0, 0] },
        { requirePhase2: true, text: "â€œì´ìê²¸ì´ ìì‹ ë“¤ì„ ê³µì‹ ìœ¼ë¡œ ë´‰í•˜ê³ , ê°ì˜¥ì˜ ì‚¬í˜•ìˆ˜ë“¤ì„ í’€ì–´ì£¼ì–´ ì€í˜œë¥¼ ë² í’€ìê³  í•©ë‹ˆë‹¤.â€", leftBtn: "ì›í•˜ëŠ” ëŒ€ë¡œ í•´ë¼...", rightBtn: "ë°˜ì—­ìë“¤ì—ê²Œ ìƒì´ë¼ë‹ˆ!", leftEffect: [-10, 20, 0, 0, -10], rightEffect: [10, -20, 0, 0, 10] },
        { requirePhase2: true, text: "â€œê¸ˆë‚˜ë¼ê°€ ìš°ë¦¬ì˜ ì¹­ì‹ (ì‚¬ëŒ€)ì„ ë°›ì•„ë“¤ì—¬ ë‹µì‹ ì„ ë³´ëƒˆìŠµë‹ˆë‹¤. ìš°ë¦¬ë¥¼ 'ì‹ í•˜'ë¼ ë¶€ë¥´ë©° ê±°ë§Œí•˜ê²Œ êµ´ê³  ìˆìŠµë‹ˆë‹¤.â€", leftBtn: "ë¶ˆê°€í”¼í•œ ì¼ì´ë‹¤", rightBtn: "ë‹µì‹ ì„ ì°¢ì–´ë²„ë ¤ë¼!", leftEffect: [-15, 10, 5, 0, 0], rightEffect: [15, -10, -10, 0, 0] },
        { requirePhase2: true, text: "â€œì´ìê²¸ê³¼ ì²™ì¤€ê²½ì˜ ë…¸ë¹„ë“¤ì´ ê¸¸ì„ ë¹„í‚¤ì§€ ì•Šì•˜ë‹¤ë©° ê¶ê¶ í•œë³µíŒì—ì„œ íŒ¨ì‹¸ì›€ì„ ë²Œì˜€ìŠµë‹ˆë‹¤.â€", leftBtn: "ì´ìê²¸ì˜ ì²´ë©´ì„ ì„¸ì›Œì¤€ë‹¤", rightBtn: "ì²™ì¤€ê²½ì˜ í¸ì„ ë“ ë‹¤", leftEffect: [-10, 10, -10, 0, 0], rightEffect: [0, -10, 10, 0, 0] },
        { requirePhase2: true, text: "â€œê¶ê¶ì´ ë¶ˆíƒ„ ê²ƒì— ëŒ€í•´ ë¯¼ì‹¬ì´ í‰í‰í•©ë‹ˆë‹¤. ì´ìê²¸ì´ ìŠ¬ì© 'ë¬´ì‹í•œ êµ°ì¸ë“¤ì˜ ë°©í™” íƒ“'ì´ë¼ë©° ì±…ì„ì„ ëŒë¦½ë‹ˆë‹¤.â€", leftBtn: "ë§ì¥êµ¬ì¹œë‹¤ (ì²™ì¤€ê²½ ë¹„ë‚œ)", rightBtn: "ë¬´ì¥ë“¤ì„ ê°ì‹¼ë‹¤ (ì´ìê²¸ ë¬´ì‹œ)", leftEffect: [-10, 10, -15, 0, -10], rightEffect: [10, -10, 15, 0, 0] },
        { requirePhase2: true, text: "â€œì´ìê²¸ì´ ì²™ì¤€ê²½ì„ ê²¬ì œí•˜ì—¬ ê·¸ì˜ ë³‘ê¶Œì„ íšŒìˆ˜í•˜ë ¤ í•©ë‹ˆë‹¤.â€", leftBtn: "ìŠ¹ì¸í•œë‹¤", rightBtn: "ê·¸ê±´ ë¶€ë‹¹í•˜ë‹¤ê³  ë§‰ëŠ”ë‹¤", leftEffect: [-10, 15, -15, 0, 0], rightEffect: [10, -10, 10, 0, 0] },
        { requirePhase2: true, text: "â€œì‹¬ë³µ ìµœì‚¬ì „ì´ ì€ë°€íˆ ì•„ë£ë‹ˆë‹¤. 'ì²™ì¤€ê²½ì€ ì˜ë¦¬ê°€ ìˆëŠ” ìì´ë‹ˆ, ì§„ì‹¬ìœ¼ë¡œ ì„¤ë“í•˜ë©´ ì´ìê²¸ì„ ë²¨ ì¹¼ì´ ë  ê²ƒì…ë‹ˆë‹¤.'â€", leftBtn: "ì¹œí•„ ì„œì‹ ì„ ë³´ë‚¸ë‹¤", rightBtn: "ì•„ì§ì€ ìœ„í—˜í•˜ë‹¤...", leftEffect: [10, -20, 15, 0, 5], rightEffect: [-10, 10, 0, 0, 0] }
        ];

    window.onload = function() { 
        showIntroText(); 
        renderStats(); 
        pickNewCard(); 
    };

    function resetGame() {
        stats = { royal: 50, kin: 50, military: 50, money: 50, public: 50 };
        turn = 1; isPhase2 = false; phase2StartTurn = 0;
        
        cheokRandomTurn = Math.floor(Math.random() * 31) + 10; 

        randomDeck.forEach(c => c.hasPlayed = false);

	const effectOverlay = document.getElementById("ending-effect-overlay");
        const gameContainer = document.getElementById("game-container");
        effectOverlay.className = ""; // ëª¨ë“  í´ë˜ìŠ¤ ì œê±°
        gameContainer.classList.remove("violent-shake");
        gameContainer.style.filter = "none"; // í˜¹ì‹œ ì ìš©ëœ í•„í„° í•´ì œ

        document.body.classList.remove("phase-fire");
        document.getElementById("game-over-screen").style.display="none";
        document.getElementById("ending-msg-screen").style.display="none"; 
        document.getElementById("intro-screen").style.display="none"; 
        document.getElementById("game-container").style.opacity=1;
        document.querySelector(".history-paper").classList.remove("open-effect");

        renderStats(); pickNewCard(); initSwipe();
    }

    function pickNewCard() {
        if (isPhase2) document.body.classList.add("phase-fire");
        else document.body.classList.remove("phase-fire");

        if (turn === 60) {
            currentCard = event_persuade_cheok;
        }
        else if (nextEventCard) {
            currentCard = nextEventCard;
            nextEventCard = null;
        } 
        else {
            const sCard = storyDeck.find(c => c.id === turn);
            if (sCard) {
                if (sCard.id === 51 && isPhase2) {
                    pickRandomCard();
                } else {
                    currentCard = sCard;
                }
            } 
            else if (turn === cheokRandomTurn && !isPhase2) {
                currentCard = event_cheok_rumor;
            }
            else {
                pickRandomCard();
            }
        }

        const overlay = document.getElementById("warning-overlay");
        const container = document.getElementById("game-container");

        if (currentCard.id === 45) {
            overlay.classList.add("hint");
            overlay.style.display = "block";
            container.classList.remove("shake-effect"); 
        } 
        else if (currentCard.id === 46 || currentCard.id === 51) {
            overlay.classList.remove("hint");
            overlay.style.display = "block";
            container.classList.add("shake-effect");
        } 
        else {
            overlay.classList.remove("hint");
            overlay.style.display = "none";
            container.classList.remove("shake-effect");
        }

        updateUI();
    }

    function pickRandomCard() {
        const validCards = randomDeck.filter(card => {
            const min = card.minTurn || 1;
            const max = card.maxTurn || 9999;
            const turnMatch = turn >= min && turn <= max;
            
            let phaseMatch = true;
            if (card.requirePhase2 && !isPhase2) phaseMatch = false; 
            if (card.onlyPhase1 && isPhase2) phaseMatch = false;

            if (card.hasPlayed) return false;

            return turnMatch && phaseMatch;
        });

        if (validCards.length > 0) {
            currentCard = validCards[Math.floor(Math.random() * validCards.length)];
            currentCard.hasPlayed = true;
        } else {
            currentCard = { text: "í‰ì˜¨í•œ í•œ ë‹¬ì´ ì§€ë‚˜ê°‘ë‹ˆë‹¤.", leftBtn: "êµ­ì • ì‚´í”¼ê¸°", rightBtn: "íœ´ì‹", leftEffect:[0,0,0,0,0], rightEffect:[0,0,0,0,0] };
        }
    }

    function updateUI() {
        document.getElementById("question-text").innerHTML = currentCard.text;

        if (isPhase2) {
            document.getElementById("label-royal").innerText = "ì¸ì¢…";
            document.getElementById("label-kin").innerText = "ì´ìê²¸";
            document.getElementById("label-military").innerText = "ì²™ì¤€ê²½";
        } else {
            document.getElementById("label-royal").innerText = "ì™•ê¶Œ";
            document.getElementById("label-kin").innerText = "ì™¸ì²™";
            document.getElementById("label-military").innerText = "êµ°ì‚¬";
        }

        let dateString = "";
        if (!isPhase2) {
            let y = Math.floor((turn-1)/12)+1; 
            let m = (turn-1)%12+1;
            dateString = `(ì¸ì¢… ${y}ë…„ ${m}ì›”)`;
        } else {
            let weeksPassed = (turn - phase2StartTurn) + 1;
            let startTotalMonths = phase2StartTurn - 1; 
            let addedMonths = Math.floor((turn - phase2StartTurn) / 4); 
            let currentTotalMonths = startTotalMonths + addedMonths;
            let y = Math.floor(currentTotalMonths / 12) + 1;
            let m = (currentTotalMonths % 12) + 1;
            dateString = `(ì¸ì¢… ${y}ë…„ ${m}ì›” - ê±°ì‚¬ ${weeksPassed}ì£¼ì°¨)`;
        }

        document.getElementById("year-text").innerText = dateString;
        const c = document.getElementById("game-card"); c.style.transform = "translate(0,0) rotate(0)";
        document.getElementById("choice-overlay").style.opacity=0; hidePreview();
    }

    function renderStats() {
        const topVals = [stats.royal, stats.kin, stats.military];
        const topIds = ["fill-royal", "fill-kin", "fill-military"];
        for(let i=0; i<3; i++) {
            const h = Math.max(0, Math.min(100, topVals[i]));
            const el = document.getElementById(topIds[i]);
            el.style.height = h + "%";
            if(h <= 20 || h >= 80) {
                el.style.backgroundColor = "#e74c3c"; // ğŸ”´ ìœ„í—˜!
            } else {
                el.style.backgroundColor = "#ecf0f1"; // âšª ì•ˆì „
            }
        }
        const botVals = [stats.money, stats.public];
        const botFillIds = ["fill-money", "fill-public"];
        const botTextIds = ["text-money", "text-public"];
        for(let i=0; i<2; i++) {
            const v = Math.max(0, Math.min(100, botVals[i]));
            document.getElementById(botFillIds[i]).style.width = v + "%";
            document.getElementById(botTextIds[i]).innerText = v;
            const fillEl = document.getElementById(botFillIds[i]);
            if(v <= 20) fillEl.style.backgroundColor = "#e74c3c";
            else fillEl.style.backgroundColor = "#f1c40f";
        }
    }

    // ID ë§¤í•‘ í—¬í¼ í•¨ìˆ˜ (0~4 ì¸ë±ìŠ¤ë¥¼ ì‹¤ì œ HTML IDë¡œ ë³€í™˜)
    function getStatIds(index) {
        // ìˆœì„œ: ì™•ê¶Œ(0), ì™¸ì²™(1), êµ°ì‚¬(2), êµ­ê³ (3), ë¯¼ì‹¬(4)
        const fills = ["fill-royal", "fill-kin", "fill-military", "fill-money", "fill-public"];
        const labels = ["label-royal", "label-kin", "label-military", "text-money", "text-public"];
        const icons = ["icon-0", "icon-1", "icon-2", "icon-3", "icon-4"];
        return { 
            fill: document.getElementById(fills[index]), 
            label: document.getElementById(labels[index]),
            icon: document.getElementById(icons[index])
        };
    }

    function showPreview(ch) {
        let eff = (ch===0)?currentCard.leftEffect : (ch===1)?currentCard.rightEffect : (currentCard.downEffect||[0,0,0,0,0]);
        
        for(let i=0; i<5; i++) {
            const els = getStatIds(i); // ID ê°€ì ¸ì˜¤ê¸° í—¬í¼
            
            if(eff[i] !== 0) {
                document.getElementById(`ind-${i}`).classList.add("active");
                
                // ìƒë‹¨ 3ê°œ(i<3) ì•„ì´ì½˜ë§Œ í”ë“¤ë¦¼ íš¨ê³¼ ì ìš©. í•˜ë‹¨ì€ ê±´ë„ˆëœ€.
                if(els.icon && i < 3) els.icon.classList.add("highlight-stat");

                if(els.label) els.label.classList.add("text-glow");

                // ìƒë‹¨(0~2)ì€ ì¶œë ì„, í•˜ë‹¨(3~4)ì€ ë¹›ë‚¨ íš¨ê³¼ ë¶„ë¦¬ (ê¸°ì¡´ ìœ ì§€)
                if(els.fill) {
                    if (i < 3) els.fill.classList.add("sloshing"); 
                    else els.fill.classList.add("bar-shimmer");   
                }
            }
            else {
                document.getElementById(`ind-${i}`).classList.remove("active");
                if(els.icon) els.icon.classList.remove("highlight-stat");
                if(els.label) els.label.classList.remove("text-glow");
                if(els.fill) {
                    els.fill.classList.remove("sloshing");
                    els.fill.classList.remove("bar-shimmer");
                }
            }
        }
    }

    function hidePreview() { 
        for(let i=0; i<5; i++) {
            const els = getStatIds(i);
            
            document.getElementById(`ind-${i}`).classList.remove("active");
            
            if(els.icon) els.icon.classList.remove("highlight-stat");
            if(els.label) els.label.classList.remove("text-glow");
            
            // ë‘ í´ë˜ìŠ¤ ëª¨ë‘ ì œê±°
            if(els.fill) {
                els.fill.classList.remove("sloshing");
                els.fill.classList.remove("bar-shimmer");
            }
        }
    }

    function makeChoice(ch) {
        document.getElementById("warning-overlay").style.display = "none";
        document.getElementById("game-container").classList.remove("shake-effect");

        if (ch === 2) { 
            silenceStreak++;
        } else { 
            silenceStreak = 0;
        }

        if (silenceStreak >= 3) {
            unlockAchievement("die_silence");
            checkGameOver(true, "ì¹¨ë¬µì˜ ì™•", "êµ­ì •ì— ê´€ì—¬í•˜ì§€ ì•Šê³  ì—°ê±°í‘¸ ì¹¨ë¬µí•˜ë‹ˆ, ë‹µë‹µí•¨ì„ ëŠë‚€ ì‹ ë£Œë“¤ì´ ì „í•˜ë¥¼ ë‚´ì«“ê³  ìƒˆ ì™•ì„ ì¶”ëŒ€í–ˆìŠµë‹ˆë‹¤.");
            return;
        }

        if (currentCard.isPoison && ch === 0) {
            unlockAchievement("die_poison");
            checkGameOver(true, "ë…ì‚´", "ê°€ì¥ ê°€ê¹Œìš´ ê³³ì—ì„œ ë¹„ìˆ˜ë¥¼ ë§ì•˜ìœ¼ë‹ˆ, ê¶Œë ¥ ì•ì—ì„œëŠ” í˜ˆìœ¡ì˜ ì •ë„ ë¬´ìƒ‰í•˜ë‹¤.");
            return;
        }
        if (currentCard.isHunting && ch === 0) {
            if (Math.random() < 0.25) { 
                unlockAchievement("die_fall");
                checkGameOver(true, "ë‚™ë§ˆ", "ë§ì´ ê°‘ìê¸° ë‚ ë›°ëŠ” ë°”ëŒì— ë–¨ì–´ì ¸ ëª©ì´ ë¶€ëŸ¬ì§€ê³  ë§ì•˜ìŠµë‹ˆë‹¤. ë¶ˆìš´í•œ ì£½ìŒì…ë‹ˆë‹¤.");
                return;
            }
        }
        
        // ì²™ì¤€ê²½ íšŒìœ  ì„±ê³µ
        if (currentCard.id === "persuade_cheok") {
            if (ch === 0) { 
                // [ìŠ¹ë¦¬ ì¡°ê±´] êµ°ì‚¬ 50, ì™•ê¶Œ 50, ì™¸ì²™ 40
                if (stats.military >= 50 && stats.royal >= 50 && stats.kin <= 40) {
                    document.getElementById("end-title-msg").style.color="#f1c40f"; 
                    unlockAchievement("win_balance");
                    checkGameOver(true, "êµ°ì£¼", "ì²™ì¤€ê²½ì´ ì™•ëª…ì„ ë°›ë“¤ì–´ ì´ìê²¸ì„ ì²´í¬í•˜ê³  ìœ ë°° ë³´ëƒˆìŠµë‹ˆë‹¤. ê°•ë ¥í•œ ì™•ê¶Œê³¼ ë¬´ë ¥ìœ¼ë¡œ ë‚œì„¸ë¥¼ í‰ì •í–ˆìŠµë‹ˆë‹¤!");
                    return;
                } else {
                    nextEventCard = event_persuade_fail;
                    renderStats(); 
                    pickNewCard(); 
                    return; 
                }
            }
        }

        // íšŒìœ  ì‹¤íŒ¨
        if (currentCard.id === "persuade_fail") {
            turn = 61; 
            checkGameOver(); 
            return;
        }

        if ((currentCard.id === 46 && ch === 0) || currentCard.id === 51 || currentCard.id === "force_phase2") {
            if (!isPhase2) {
                isPhase2 = true;
                phase2StartTurn = turn; 
            }
        }

        let eff = (ch===0)?currentCard.leftEffect : (ch===1)?currentCard.rightEffect : (currentCard.downEffect||[0,0,0,0,0]);
        stats.royal += eff[0]||0; stats.kin += eff[1]||0; stats.military += eff[2]||0;
        stats.money += eff[3]||0; stats.public += eff[4]||0;
        
        if (stats.money >= 100) unlockAchievement("max_money");
        if (stats.public >= 100) unlockAchievement("max_public");
        
        let hasNextEvent = false;
        if (ch === 0 && currentCard.leftNext) { nextEventCard = currentCard.leftNext; hasNextEvent = true; }
        else if (ch === 1 && currentCard.rightNext) { nextEventCard = currentCard.rightNext; hasNextEvent = true; }
        else if (ch === 2 && currentCard.downNext) { nextEventCard = currentCard.downNext; hasNextEvent = true; }

        if (!hasNextEvent && isPhase2 && turn < 60 && stats.military >= 50 && stats.royal >= 50 && stats.kin <= 40) {
            nextEventCard = event_persuade_cheok; 
            hasNextEvent = true;
        }

        if (turn >= 30) unlockAchievement("turn_50");
        if (turn >= 60) unlockAchievement("turn_100");

        renderStats(); 

        if(!checkGameOver()) { 
            if (!hasNextEvent) turn++; 
            pickNewCard(); 
        }
    }

    // [1ë‹¨ê³„] ì—”ë”© ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
    function checkGameOver(force=false, fTitle="", fMsg="") {
        let t="íŒ¨ë°°", m="", over=false;
        
        if (force) { t=fTitle; m=fMsg; over=true; }
        else if(stats.royal<=0){ t="íìœ„"; m="ì™•ìœ„ì˜ ê¸°ë‘¥ì´ ë¬´ë„ˆì§€ê³ , ê²°êµ­ ì‹ í•˜ë“¤ì— ì˜í•´ íìœ„ë˜ì—ˆìŠµë‹ˆë‹¤."; unlockAchievement("die_royal"); over=true; }
        else if(stats.royal>=100){ t="í­êµ°"; m="ì™•ê¶Œì´ í•˜ëŠ˜ì„ ì°”ëŸ¬ ì‹ í•˜ë“¤ì„ í•¨ë¶€ë¡œ ì£½ì´ë‹ˆ, ê²°êµ­ ê³µí¬ì— ì§ˆë¦° ì´ë“¤ì´ ë°˜ì •ì„ ì¼ìœ¼ì¼°ìŠµë‹ˆë‹¤."; unlockAchievement("die_tyrant"); over=true; }
        else if(stats.kin<=0){ t="ë…ì‚´"; m="ì§€ë‚˜ì¹œ ê²¬ì œì— ìœ„ê¸°ê°ì„ ëŠë‚€ ì™¸ì²™ì—ê²Œ ë…ì‚´ë‹¹í–ˆìŠµë‹ˆë‹¤."; unlockAchievement("die_poison"); over=true; }
        else if(stats.kin>=100){ t="ê¼­ë‘ê°ì‹œ"; m="ì™¸ì²™ì˜ ì†ì•„ê·€ì— ì¡°ì •ì´ ë„˜ì–´ê°€ê³ , í—ˆìˆ˜ì•„ë¹„ ì„ê¸ˆì´ ë˜ì—ˆìŠµë‹ˆë‹¤."; unlockAchievement("die_kin"); over=true; }
        else if(stats.military<=0){ t="í•¨ë½"; m="êµ°ì„¸ê°€ í©ì–´ì§€ì ë¶ë°©ì´ ë¬´ë„ˆì§€ê³ , ê³ ë ¤ê°€ ì˜¤ë‘ìºì˜ ë°œ ì•„ë˜ì— ì§“ë°Ÿí™ë‹ˆë‹¤."; unlockAchievement("die_military"); over=true; }
        else if(stats.military>=100){ t="ì •ë³€"; m="ë¹„ëŒ€í•´ì§„ êµ°ë¶€ê°€ ì™•ì„ ëª°ì•„ë‚´ê³  ë¬´ì‹ ì •ê¶Œì„ ìˆ˜ë¦½í–ˆìŠµë‹ˆë‹¤."; unlockAchievement("die_military"); over=true; }
        else if(stats.money<=0){ t="íŒŒì‚°"; m="ì¬ì •ì´ ë°”ë‹¥ë‚˜ ë°±ì„±ë“¤ì˜ ì‹œë¦„ë§Œ ë”ìš± ê¹Šì–´ì§ˆ ë¿ì…ë‹ˆë‹¤."; unlockAchievement("die_money"); over=true; }
        else if(stats.public<=0){ t="ë¯¼ë€"; m="ì„±ë‚œ ë°±ì„±ë“¤ì´ ê¶ìœ¼ë¡œ ì³ë“¤ì–´ì™”ìŠµë‹ˆë‹¤."; unlockAchievement("die_public"); over=true; }
        else if(isPhase2 && stats.royal >= 80 && stats.public >= 80) {
            t="ëª…êµ°"; 
            m="ì™•ì˜ ìœ„ì—„ì´ ë“œë†’ê³  ë°±ì„±ì˜ ì§€ì§€ê°€ í•˜ëŠ˜ì— ë‹¿ìœ¼ë‹ˆ, ì´ìê²¸ê³¼ ì²™ì¤€ê²½ë„ ê°íˆ ëŒ€í•­í•˜ì§€ ëª»í•˜ê³  ë¬¼ëŸ¬ë‚¬ìŠµë‹ˆë‹¤. ê³ ë ¤ì— ì§„ì •í•œ í‰í™”ê°€ ì°¾ì•„ì™”ìŠµë‹ˆë‹¤!"; 
            document.getElementById("end-title-msg").style.color="#f1c40f"; // ìŠ¹ë¦¬ ìƒ‰ìƒ
            unlockAchievement("win_true"); 
            over=true; 
        }
        else if (turn >= 60) {
            over = true;
            unlockAchievement("turn_100");
            if (stats.kin >= 60) {
                t = "ê·¸ë¦¼ì ì™•";
                m = "í‰ìƒì„ ì´ìê²¸ì˜ ê·¸ëŠ˜ì—ì„œ ë²—ì–´ë‚˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ì™•ì´ì—ˆìœ¼ë‚˜, ì§„ì •í•œ ì£¼ì¸ì´ì—ˆë˜ ì ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.";
            } else if (stats.military >= 60) {
                t = "ë¬´ì‹ ì •ê¶Œ";
                m = "ì´ìê²¸ì€ ê²¬ì œí–ˆìœ¼ë‚˜, ê·¸ ë¹ˆìë¦¬ë¥¼ ì²™ì¤€ê²½ê³¼ ë¬´ì‹ ë“¤ì´ ì°¨ì§€í–ˆìŠµë‹ˆë‹¤. ì™•ëª…ë³´ë‹¤ ì¥êµ°ì˜ ì¹¼ëì´ ë” ë¬´ì„œìš´ ì„¸ìƒì´ ë˜ì—ˆìŠµë‹ˆë‹¤.";
            } else {
                t = "ë¯¸ì™„ì˜ ê°œí˜";
                m = "ë„ˆë¬´ ì˜¤ëœ ì‹œê°„ ë§ì„¤ì˜€ìŠµë‹ˆë‹¤. ì´ìê²¸ì„ ëª°ì•„ë‚¼ ê²°ì •ì ì¸ ê¸°íšŒë¥¼ ë†“ì¹˜ê³ , ì–´ì •ì©¡í•œ ìƒíƒœë¡œ ì¹˜ì„¸ê°€ ì €ë¬¼ì—ˆìŠµë‹ˆë‹¤.";
            }
        }

        if(over) {
            //  ì—”ë”© ì¢…ë¥˜ì— ë”°ë¥¸ íŠ¹ìˆ˜ íš¨ê³¼ ê²°ì •
            const effectOverlay = document.getElementById("ending-effect-overlay");
            const gameContainer = document.getElementById("game-container");
            let delayTime = 1000; // ê¸°ë³¸ 2ì´ˆ ëŒ€ê¸°

            // 1. í­ë ¥ì /ë¹„ê·¹ì  ì—”ë”© ê·¸ë£¹
            const violentEndings = ["ë…ì‚´", "ë‚™ë§ˆ", "í•¨ë½", "ì •ë³€", "ë¯¼ë€", "í­êµ°"];
            // 2. ì•”ìš¸í•œ/ì •ì¹˜ì  ì‹¤íŒ¨ ì—”ë”© ê·¸ë£¹
            const gloomyEndings = ["íìœ„", "ê¼­ë‘ê°ì‹œ", "íŒŒì‚°", "ê·¸ë¦¼ì ì™•", "êµ°ë¶€ì˜ ê¼­ë‘ê°ì‹œ", "ë¯¸ì™„ì˜ ê°œí˜", "ì¹¨ë¬µì˜ ì™•"];
            // 3. ì„±ê³µ ì—”ë”© ê·¸ë£¹
            const gloriousEndings = ["ëª…êµ°", "êµ°ì£¼"];

            if (violentEndings.includes(t)) {
                effectOverlay.classList.add("effect-violent-flash");
                gameContainer.classList.add("violent-shake");
                delayTime = 1000; // ì¡°ê¸ˆ ë” ê¸¸ê²Œ
            } 
            else if (gloomyEndings.includes(t)) {
                effectOverlay.classList.add("effect-gloomy-fade");
                // ê²Œì„ ì»¨í…Œì´ë„ˆë„ í‘ë°± ì²˜ë¦¬
                gameContainer.style.transition = "filter 3s";
                gameContainer.style.filter = "grayscale(100%) brightness(0.5)";
                delayTime = 3000; // ì²œì²œíˆ ì–´ë‘ì›Œì§
            }
            else if (gloriousEndings.includes(t)) {
                effectOverlay.classList.add("effect-glorious-shine");
                delayTime = 3000; // ì˜ê´‘ì„ ë§Œë½í•˜ëŠ” ì‹œê°„
            }

            //  ì´í™íŠ¸ë¥¼ ë³´ì—¬ì¤€ í›„ ì¼ì • ì‹œê°„ ë’¤ì— ê²°ê³¼ í™”ë©´ í‘œì‹œ
            setTimeout(() => {
                document.getElementById("end-title-msg").innerText = t;
                document.getElementById("end-reason-msg").innerText = m;
                // ê²Œì„ ì»¨í…Œì´ë„ˆ ìˆ¨ê¹€ (ì´í™íŠ¸ ë ˆì´ì–´ëŠ” ìœ ì§€)
                gameContainer.style.opacity = 0; 
                document.getElementById("ending-msg-screen").style.display = "flex";
            }, delayTime);
            
            // ë°ì´í„° ìƒì„± (ë¯¸ë¦¬ í•´ë‘ )
            generateHistory(t, m);
            return true;
        }
        return false;
    }

    // [2ë‹¨ê³„] ì‚¬ë£Œ ì—”ë”© í™”ë©´ìœ¼ë¡œ ì „í™˜ (í„°ì¹˜ ì‹œ í˜¸ì¶œ)
    function showHistoryScroll() {
        document.getElementById("ending-msg-screen").style.display = "none";
        document.getElementById("game-over-screen").style.display = "flex";
        setTimeout(() => {
            document.querySelector(".history-paper").classList.add("open-effect");
        }, 50);
    }

    function generateHistory(title, reason) {
        const content = document.getElementById("history-content");
        
        let years = Math.floor((turn-1)/12)+1;
        let months = (turn-1)%12+1;
        let reignTime = `ì¸ì¢… ${years}ë…„ ${months}ì›”`;

        let records = [];
        if (turn > 12) records.push(`ì¦‰ìœ„ ì´ˆ, ì´ìê²¸ì˜ ìœ„ì„¸ ì†ì—ì„œë„ ${years}ë…„ ë„˜ê²Œ ë²„í‹°ì—ˆë‹¤.`);
        if (isPhase2) records.push("ì´ìê²¸ì˜ ì „íš¡ì— ë§ì„œ ê±°ì‚¬ë¥¼ ë„ëª¨í•˜ì˜€ë‹¤.");
        if (phase2StartTurn > 0 && turn - phase2StartTurn > 4 && title !== "ëª…êµ°" && title !== "êµ°ì£¼") {
            records.push("ê±°ì‚¬ ì‹¤íŒ¨ í›„ ë‚´ì „ì˜ í˜¼ë€ ì†ì—ì„œë„ ëˆì§ˆê¸°ê²Œ ì €í•­í•˜ë©° ê¸°íšŒë¥¼ ì—¿ë³´ì•˜ë‹¤.");
        }

        if (stats.money >= 100) records.push("ë‚´íƒ•ê¸ˆê³¼ êµ­ê³ ê°€ ê°€ë“ ì°¨, ê³ ë ¤ ì—­ì‚¬ìƒ ê°€ì¥ ë¶€ìœ í•œ ì‹œê¸°ë¥¼ ì—´ì—ˆë‹¤.");
        else if (stats.money > 70) records.push("êµ­ê³ ë¥¼ ë„‰ë„‰íˆ í•˜ì—¬ ë‚˜ë¼ì˜ ì‚´ë¦¼ì„ ìœ¤íƒí•˜ê²Œ í–ˆë‹¤.");
        
        if (stats.public >= 100) records.push("ì§€ê·¹í•œ ì„ ì •ì„ ë² í’€ì–´, ë°±ì„±ë“¤ì´ ì™•ì„ ì–´ë²„ì´ì²˜ëŸ¼ ë”°ë¥´ë©° ë…¸ë˜í–ˆë‹¤.");
        else if (stats.public > 70) records.push("ë°±ì„±ë“¤ì˜ ëª©ì†Œë¦¬ì— ê·€ë¥¼ ê¸°ìš¸ì—¬ ì„±êµ°ì˜ ìì§ˆì„ ë³´ì˜€ë‹¤.");
        
        if (stats.military > 80) records.push("êµ°ì‚¬ë ¥ì„ ê°•í•˜ê²Œ í‚¤ì›Œ ë¶ë°©ì˜ ìœ„í˜‘ê³¼ ë‚´ë€ì— ëŒ€ë¹„í–ˆë‹¤.");
        if (stats.royal >= 100) records.push("ì™•ê¶Œì´ í•˜ëŠ˜ì„ ì°”ëŸ¬, ì™•ì˜ ë§ í•œë§ˆë””ì— ì‚°ì²œì´ ë–¨ì—ˆë‹¤.");

        if (title === "ëª…êµ°") records.push("í”¼ë¥¼ í˜ë¦¬ì§€ ì•ŠëŠ” ìœ„ì—„ìœ¼ë¡œ ì—­ì ë“¤ì„ êµ´ë³µì‹œí‚¤ê³  ì™•ì‹¤ì˜ ê¶Œìœ„ë¥¼ ë“œë†’ì˜€ë‹¤.");
        if (title === "ë‚™ë§ˆ") records.push("ì‚¬ëƒ¥ì„ ì¦ê¸°ë‹¤ ë¶ˆì˜ì˜ ì‚¬ê³ ë¥¼ ë‹¹í•´, ëœ»ì„ ë‹¤ í¼ì¹˜ì§€ ëª»í•˜ê³  ìš”ì ˆí•˜ì˜€ë‹¤.");
        if (title === "ë…ì‚´") records.push("ì´ìê²¸ì˜ ì••ë°• ì•ì—ì„œ ìˆ˜ìƒí•œ ë–¡ì„ ë¨¹ê³  ìš”ì ˆí•˜ì˜€ë‹¤.");
        if (title === "ê·¸ë¦¼ì ì™•" || title === "ë¯¸ì™„ì˜ ê°œí˜") records.push("ì˜¤ëœ ê¸°ê°„ ì¬ìœ„í•˜ì˜€ìœ¼ë‚˜, ëë‚´ ì´ìê²¸ì˜ ê·¸ëŠ˜ì„ ì™„ì „íˆ ê±·ì–´ë‚´ì§€ ëª»í–ˆë‹¤.");
        if (title === "ë¬´ì‹ ì •ê¶Œ") records.push("ì™¸ì²™ì„ ê²¬ì œí•˜ê¸° ìœ„í•´ í‚¤ìš´ êµ°ì‚¬ë ¥ì´ ë„ë¦¬ì–´ ì™•ê¶Œì„ ì˜¥ì£„ëŠ” ì¡±ì‡„ê°€ ë˜ì—ˆë‹¤.");
        if (title === "ì¹¨ë¬µì˜ ì™•") records.push("ì¤‘ëŒ€í•œ êµ­ë©´ë§ˆë‹¤ ì…ì„ ë‹«ê³  ê²°ì •ì„ íšŒí”¼í•˜ì—¬ ì¡°ì •ì˜ í˜¼ë€ì„ ê°€ì¤‘ì‹œì¼°ë‹¤.");

        let evaluation = "";
        switch(title) {
            case "ëª…êµ°": evaluation = "ì„±êµ°ì˜ ë•ê³¼ ì œì™•ì˜ ìœ„ì—„ì„ ë™ì‹œì— ê°–ì¶”ì—ˆìœ¼ë‹ˆ, ë§Œì„¸ì˜ ê·€ê°ì´ ë  ê²ƒì´ë‹¤."; break;
            case "êµ°ì£¼": evaluation = "ë‚œì„¸ë¥¼ í‰ì •í•˜ê³  ì™•ì‹¤ì„ ì§€ì¼œëƒˆìœ¼ë‚˜, ê·¸ ê³¼ì •ì—ì„œ íë¥¸ í”¼ê°€ ë„ˆë¬´ ë§ì•˜ë‹¤."; break;
            case "í­êµ°": evaluation = "êµ°ì£¼ê°€ ë•ì„ ìƒê³  ê³µí¬ë¡œë§Œ ë‹¤ìŠ¤ë¦¬ë ¤ í–ˆìœ¼ë‹ˆ, ê·¸ ëì´ ë¹„ì°¸í•œ ê²ƒì€ ìëª…í•œ ì´ì¹˜ë‹¤."; break;
            case "ë‚™ë§ˆ": evaluation = "í•œ ë‚˜ë¼ì˜ êµ°ì£¼ê°€ ìœ í¬ë¥¼ ì¢‡ë‹¤ í—ˆë§í•˜ê²Œ ì§€ë‹¤ë‹ˆ."; break;
            case "ë…ì‚´": evaluation = "ê°€ì¥ ê°€ê¹Œìš´ ê³³ì—ì„œ ë¹„ìˆ˜ë¥¼ ë§ì•˜ìœ¼ë‹ˆ, ê¶Œë ¥ ì•ì—ì„œëŠ” í˜ˆìœ¡ì˜ ì •ë„ ë¬´ìƒ‰í•˜ë‹¤."; break;
            case "íìœ„": evaluation = "ì™¸ì²™ì˜ ê·¸ëŠ˜ì— ê°€ë ¤ ëœ»ì„ í´ë³´ì§€ ëª»í•˜ê³  êº¾ì˜€ìœ¼ë‹ˆ, ìŠ¬í”ˆ ì¼ì´ë‹¤."; break;
            case "í—ˆìˆ˜ì•„ë¹„": evaluation = "ì™•ì¢Œì— ìˆì—ˆìœ¼ë‚˜ ì™•ì´ ì•„ë‹ˆì—ˆë‹¤. ê¶Œë ¥ì€ ì‹ í•˜ì—ê²Œ ìˆì—ˆê³  ì™•ì€ í—ˆìš¸ë¿ì´ì—ˆìœ¼ë‹ˆ, ì´ë¥¼ ì–´ì°Œ êµ°ì£¼ë¼ í•˜ê² ëŠ”ê°€."; break;
            case "ì •ë³€": case "í•¨ë½": evaluation = "ë¬´ë ¥ì„ í†µì œí•˜ì§€ ëª»í•´ ìŠ¤ìŠ¤ë¡œ í™”ë¥¼ ë¶ˆë €ë‹¤. ì¹¼ë¡œ í¥í•œ ìëŠ” ê²°êµ­ ì¹¼ë¡œ ë§í•˜ëŠ” ë²•."; break;
            case "íŒŒì‚°": case "ë¯¼ë€": evaluation = "ë°±ì„±ì˜ ì‚¶ì„ ëŒë³´ì§€ ì•Šê³  ê·¼ë³¸ì„ ìƒì—ˆìœ¼ë‹ˆ, ë¯¼ì‹¬ì´ ë– ë‚˜ê³  ì²œëª…(å¤©å‘½)ì´ ë‹¤í•œ ê²ƒì€ ë‹¹ì—°í•œ ê·€ê²°."; break;
            case "ê·¸ë¦¼ì ì™•": evaluation = "ë³´ìœ„ì—ëŠ” ì˜¤ë˜ ìˆì—ˆìœ¼ë‚˜ ì‹¤ê¶Œì€ ì‹ í•˜ì—ê²Œ ìˆì—ˆë‹¤. í›„ì„¸ëŠ” ê·¸ë¥¼ ëˆê¸° ìˆëŠ” ìë¼ ì¹­í•˜ê¸°ë³´ë‹¨, ê²°ë‹¨ë ¥ ì—†ëŠ” ìœ ì•½í•œ êµ°ì£¼ë¡œ ê¸°ì–µí•  ê²ƒì´ë‹¤."; break;
            case "ë¬´ì‹ ì •ê¶Œ": evaluation = "ì—¬ìš°ë¥¼ í”¼í•˜ë ¤ë‹¤ í˜¸ë‘ì´ë¥¼ ë¶ˆëŸ¬ë“¤ì˜€ë‹¤. ë¬¸ì‹ ì„ ëˆ„ë¥´ê³  ë“ì„¸í•œ ë¬´ì‹ ë“¤ì´ ì¡°ì •ì„ ì¥ì•…í•˜ë‹ˆ, ê³ ë ¤ëŠ” ê¸´ ë¬´ì‹ ì •ê¶Œì˜ ì–´ë‘  ì†ìœ¼ë¡œ ë“¤ì–´ê°”ë‹¤."; break;
            case "ë¯¸ì™„ì˜ ê°œí˜": evaluation = "ê³¼ê°í•˜ê²Œ ì¹¼ì„ ë½‘ì•„ì•¼ í•  ë•Œ ë½‘ì§€ ëª»í–ˆë‹¤. ì•ˆì •ì„ í•‘ê³„ë¡œ í˜„ì‹¤ì— ì•ˆì£¼í–ˆìœ¼ë‹ˆ, ì—­ì‚¬ì˜ ë¬¼ì¤„ê¸°ë¥¼ ë°”ê¾¸ì§€ ëª»í•œ íšŒí•œë§Œì´ ë‚¨ì•˜ë‹¤."; break;
	    case "ì¹¨ë¬µì˜ ì™•": 
                evaluation = "ì†Œí†µí•˜ì§€ ì•Šê³  ì±…ì„ì§€ì§€ ì•ŠëŠ” ì™•ì€ ê³ ë¦½ë  ìˆ˜ ë°–ì— ì—†ë‹¤."; 
                break;
            default: evaluation = "ì™•ì˜ ì¹˜ì„¸ëŠ” ì§§ê³  ë§ì—†ì—ˆë‹¤. ì—­ì‚¬ëŠ” ê·¸ë¥¼ ë¹„ìš´ì˜ êµ°ì£¼ë¡œ ê¸°ì–µí•  ê²ƒì´ë‹¤.";
        }

        let html = `
            <div class="history-section">
                <span class="history-label">â–£ ì¬ìœ„:</span>
                <span class="history-text">${reignTime}ì— ë¶•ì–´(å´©å¾¡)í•˜ë‹¤.</span>
            </div>
            <div class="history-section">
                <span class="history-label">â–£ ì‚¬ì¸:</span>
                <span class="history-text">${reason}</span>
            </div>
            <div class="history-section">
                <span class="history-label">â–£ ì¹˜ì„¸ì˜ ê¸°ë¡:</span>
                <ul class="history-list">
                    ${records.length > 0 ? records.map(r => `<li>${r}</li>`).join('') : "<li>íŠ¹ë³„íˆ ê¸°ë¡í•  ë§Œí•œ ì¼ì´ ì—†ë‹¤.</li>"}
                </ul>
            </div>
            <div class="history-section" style="border-top:1px dashed #795548; padding-top:10px; margin-top:20px;">
                <span class="history-label">â–£ ì‚¬ê´€ì˜ í‰:</span><br>
                <span class="history-text" style="font-style: italic;">"${evaluation}"</span>
            </div>
        `;
        content.innerHTML = html;
    }

    function initSwipe() {
        const card=document.getElementById("game-card"), ov=document.getElementById("choice-overlay");
        const bgOverlay = document.getElementById("background-overlay");

        if(card.getAttribute("d-s")==="1")return; card.setAttribute("d-s","1");
        
        let sX=0, sY=0, isD=false; let cX=0, cY=0; 
        
        const start=(x,y)=>{ sX=x; sY=y; isD=true; card.style.transition="none"; };
        
        const move=(x,y)=>{
            if(!isD)return;
            cX=x-sX; cY=y-sY;
            
            // ë°°ê²½ìƒ‰ ë³€ê²½ ë¡œì§ (ê¸°ì¡´ ìœ ì§€)
            if (Math.abs(cY) > Math.abs(cX) && cY > 0) {
                const opacity = Math.min(cY / 200, 0.3);
                bgOverlay.style.backgroundColor = `rgba(127, 140, 141, ${opacity})`;
            } else if (cX < 0) {
                const opacity = Math.min(Math.abs(cX) / 200, 0.3);
                bgOverlay.style.backgroundColor = `rgba(231, 76, 60, ${opacity})`;
            } else if (cX > 0) {
                const opacity = Math.min(Math.abs(cX) / 200, 0.3);
                bgOverlay.style.backgroundColor = `rgba(46, 204, 113, ${opacity})`;
            }

            // ì¹´ë“œ ì´ë™ (ê¸°ì¡´ ìœ ì§€)
            if(Math.abs(cY)>Math.abs(cX) && cY>0) { 
                card.style.transform=`translate(0,${cY}px)`;
                ov.style.opacity=Math.min(cY/100,1); 
                ov.innerText=currentCard.downBtn||"...(ì¹¨ë¬µí•œë‹¤)"; 
                ov.style.color="#95a5a6";
                ov.classList.remove("locked"); 
                showPreview(2);
            } 
            else { 
                card.style.transform=`translate(${cX}px,${cY*0.2}px) rotate(${cX*0.05}deg)`;
                ov.style.opacity=Math.min(Math.abs(cX)/100,1);
                
                if(cX<0){ 
                    if (isPhase2 && stats.royal < 30) {
                        ov.innerText = "â›” ì™•ê¶Œ ë¶€ì¡±";
                        ov.classList.add("locked"); 
                    } else {
                        ov.innerText = currentCard.leftBtn;
                        ov.style.color = "#e74c3c";
                        ov.classList.remove("locked");
                    }
                    showPreview(0); 
                }
                else{ 
                    ov.innerText=currentCard.rightBtn; 
                    ov.style.color="#27ae60"; 
                    ov.classList.remove("locked");
                    showPreview(1); 
                }
            }
        };

        const end=()=>{
            if(!isD)return; isD=false; 
            card.style.transition="transform 0.3s"; 
            bgOverlay.style.backgroundColor = "transparent";

            // 1. ì¹¨ë¬µ (ì•„ë˜ìª½) - â˜…íŠ¹ìˆ˜ íš¨ê³¼ ì ìš© (0.75ì´ˆ ëŒ€ê¸°)â˜…
            if(cY>100 && Math.abs(cY)>Math.abs(cX)){ 
                applyEffect(2, "ash-effect", 750); 
            }
            
            // 2. ìˆ˜ë½ (ì˜¤ë¥¸ìª½) - ë¹ ë¥´ê³  ê¹”ë”í•˜ê²Œ (0.2ì´ˆ)
            else if(cX>100){ 
                card.style.transform=`translate(1000px,0) rotate(30deg)`; 
                setTimeout(()=>makeChoice(1), 200); 
            }
            
            // 3. ê±°ì ˆ (ì™¼ìª½) - ë¹ ë¥´ê³  ê¹”ë”í•˜ê²Œ (0.2ì´ˆ)
            else if(cX<-100){ 
                if (isPhase2 && stats.royal < 30) {
                    // ì™•ê¶Œ ë¶€ì¡± ì‹œ íŠ•ê²¨ëƒ„
                    card.style.transform="translate(0,0) rotate(0)"; 
                    ov.style.opacity=0; 
                    hidePreview();
                    showToast("â›” ìŠ¤íƒ¯ì´ ë¶€ì¡±í•´ ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤! (ì™•ê¶Œ 30 í•„ìš”)");
                } else {
                    card.style.transform=`translate(-1000px,0) rotate(-30deg)`; 
                    setTimeout(()=>makeChoice(0), 200); 
                }
            }
            
            // 4. ì·¨ì†Œ (ì œìë¦¬)
            else { 
                card.style.transform="translate(0,0) rotate(0)"; 
                ov.style.opacity=0; 
                hidePreview(); 
            }
            cX=0; cY=0;
        };

        // (applyEffect í•¨ìˆ˜ëŠ” ì•„ë˜ìª½ ì¹¨ë¬µì„ ìœ„í•´ í•„ìš”)
        const applyEffect = (choiceIdx, effectClass, duration) => {
            card.style.transition = "none"; // CSS ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•´ íŠ¸ëœì§€ì…˜ ë”
            card.classList.add(effectClass);
            
            setTimeout(()=>{
                makeChoice(choiceIdx); 
                
                // ì´ˆê¸°í™”
                card.classList.remove(effectClass);
                card.style.transform = "translate(0,0) rotate(0)";
                ov.style.opacity=0; 
                hidePreview();
                
                // íŠ¸ëœì§€ì…˜ ë³µêµ¬
                setTimeout(() => card.style.transition = "transform 0.3s", 50);
            }, duration);
        }

        card.addEventListener("touchstart",e=>start(e.touches[0].clientX,e.touches[0].clientY),{passive:false});
        card.addEventListener("mousedown",e=>start(e.clientX,e.clientY));
        window.addEventListener("touchmove",e=>{if(isD){e.preventDefault();move(e.touches[0].clientX,e.touches[0].clientY);}},{passive:false});
        window.addEventListener("mousemove",e=>move(e.clientX,e.clientY));
        window.addEventListener("touchend",end); window.addEventListener("mouseup",end);
    }
    </script>
</body>
</html>
